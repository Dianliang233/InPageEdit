{"version":3,"sources":["webpack://mediawiki-inpageedit/./method/_dir.js","webpack://mediawiki-inpageedit/./method/beforeInstall.js","webpack://mediawiki-inpageedit/./method/getUserInfo.js","webpack://mediawiki-inpageedit/./method/init.js","webpack://mediawiki-inpageedit/./method/loadScript.js","webpack://mediawiki-inpageedit/./method/loadStyles.js","webpack://mediawiki-inpageedit/./method/syncI18nData.js","webpack://mediawiki-inpageedit/./method/updateNotice.js","webpack://mediawiki-inpageedit/./module/_analysis.js","webpack://mediawiki-inpageedit/./module/_elements.js","webpack://mediawiki-inpageedit/./module/_hasRight.js","webpack://mediawiki-inpageedit/./module/_msg.js","webpack://mediawiki-inpageedit/./module/_resolveExists.js","webpack://mediawiki-inpageedit/./module/about.js","webpack://mediawiki-inpageedit/./module/articleLink.js","webpack://mediawiki-inpageedit/./module/findAndReplace.js","webpack://mediawiki-inpageedit/./module/linksHere.js","webpack://mediawiki-inpageedit/./module/loadQuickDiff.js","webpack://mediawiki-inpageedit/./module/pluginStore.js","webpack://mediawiki-inpageedit/./module/preference.js","webpack://mediawiki-inpageedit/./module/progress.js","webpack://mediawiki-inpageedit/./module/quickDelete.js","webpack://mediawiki-inpageedit/./module/quickDiff.js","webpack://mediawiki-inpageedit/./module/quickEdit.js","webpack://mediawiki-inpageedit/./module/quickPreview.js","webpack://mediawiki-inpageedit/./module/quickRedirect.js","webpack://mediawiki-inpageedit/./module/quickRename.js","webpack://mediawiki-inpageedit/./module/specialNotice.js","webpack://mediawiki-inpageedit/./module/stepModal.js","webpack://mediawiki-inpageedit/./module/version.js","webpack://mediawiki-inpageedit/./module/versionInfo.js","webpack://mediawiki-inpageedit/webpack/bootstrap","webpack://mediawiki-inpageedit/./index.js"],"names":["getDir","thisScript","document","currentScript","src","thisUrl","split","pop","join","_dir","module","exports","config","mw","get","stepModal","require","$checkbox","$hr","_msg","beforeInstall","force","$def","$","Deferred","options","skip","localStorage","getItem","setOption","el","$el","id","attr","val","prop","console","info","resolve","contents","push","content","append","text","Date","getFullYear","href","html","label","css","checked","value","display","width","wgUserLanguage","title","btnBefore","btnAfter","btnDone","onShow","modal","$modal","modalId","addEvent","find","unbind","change","click","then","setItem","getTime","mwApi","Api","getUserInfo","data","set","rights","error","warn","action","list","usprop","ususers","query","users","blockid","loadScript","loadStyles","updateNotice","syncI18nData","version","init","hook","fire","purgeCache","Boolean","util","getParamValue","location","loader","using","ssi_modal","window","_analysis","about","api","articleLink","findAndReplace","linksHere","loadQuickDiff","preference","pluginStore","progress","quickDelete","quickDiff","quickEdit","quickPreview","quickRedirect","quickRename","specialNotice","versionInfo","installOpt","initUserPlugin","InPageEdit","fnr","delete","diff","edit","preview","redirect","quickMove","rename","importantVariables","forEach","key","Object","freeze","e","noCache","ajax","url","dataType","crossDomain","cache","purge","styleFiles","link","test","prepend","rel","cacheTime","cacheUrl","funcName","localCacheName","localCacheTime","now","json","JSON","parse","getOriginalData","en","saveToCache","stringify","time","getJSON","timestamp","timeEnd","notify","className","buttons","method","a","close","closeAfter","resetOnHover","onClose","functionID","submitdata","wgServer","wgArticlePath","replace","sitename","wgSiteName","username","wgUserName","function","analysis","type","done","log","status","msg","getUrl","$br","$button","$btn","class","target","$a","appendTo","$link","page","$progress","br","hr","_hasRight","right","wgUserIsBlocked","indexOf","userLang","fallbacks","ab","ace","aln","als","an","anp","arn","arz","av","ay","ba","bar","bcc","bh","bjn","bm","bpy","bqi","bug","ce","ckb","crh","csb","cv","dsb","dtp","eml","ff","frc","frp","frr","fur","gag","gan","gl","glk","gn","gsw","hif","hsb","ht","ii","inh","iu","jut","jv","kaa","kbd","khw","kiu","kk","kl","koi","krc","ks","ksh","ku","kv","lad","lb","lbe","lez","li","lij","liv","lmo","ln","ltg","lzz","mai","mg","mhr","min","mo","mrj","mwl","myv","mzn","nah","nap","nds","no","os","pcd","pdc","pdt","pfl","pms","qu","qug","rgn","rmy","rue","ruq","sa","sah","scn","sg","sgs","shi","simple","sli","sr","srn","stq","su","szl","tcy","tg","tt","ty","udm","ug","uk","vec","vep","vls","vmf","vot","vro","wa","wo","wuu","xal","xmf","yi","za","zea","zh","toObject","handleArgs","message","args","elem","index","rgx","RegExp","makeLink","hasProtocol","blank","escape","sanitiseHtml","context","implementation","createHTMLDocument","$html","parseHTML","$div","whitelistAttrs","whitelistTags","each","$this","tagname","toLowerCase","attrs","array","style","remove","Array","prototype","slice","call","name","removeAttr","parseWikitext","urlRgx","simplePageRgx","pageWithTextRgx","pluralRgx","genderRgx","_match","count","forms","language","convertPlural","Number","gender","parseMessage","getMessage","lang","msgKey","i18nCache","after","length","cacheMessages","ipe","overrides","i18n","_resolveExists","reason","canDelete","show","sizeClass","center","outSideClose","summary","reload","hide","aboutUrl","undefined","_","item","section","revision","addClass","decodeURI","wgIsArticle","element","origin","rows","searchfor","searchexp","$textarea","replacewith","flagg","flagi","enableregex","flags","rcount","matched","match","isFile","fileReg","wgFormattedNamespaces","getList","opt","format","titles","fulimit","lhlimit","makeList","$list","wgPageName","$progressBar","$content","createObject","setTitle","setContent","pages","pageId","keys","pageList","fileusage","linkshere","err","addLink","ipeDiffLink","preventDefault","curid","oldid","fromrev","toid","torelative","torev","setInterval","wgAction","before","pluginCDN","saveCache","pluginList","loadCache","load","userPlugins","defaultSettings","editMinor","editSummary","lockToolBox","redLinkQuickEdit","shareMyInfo","watchList","user","plugins","setting","local","myPreference","extend","settingKey","settingValue","$tabList","$tabContent","for","placeholder","position","top","transform","pluginGithub","disabled","$saveLocalModal","readonly","select","$modalContent","dialog","okBtn","isCanary","onclick","tab","removeClass","confirm","cancelBtn","res","$modalWindow","setDisabled","obj","isArr","$input","usedPlugin","pluginCache","showPluginList","description","author","_force","original","splice","userName","ret","total","_total","functionData","functions","functionList","toFixed","default","closeIcon","givenReason","beforeShow","result","postWithToken","fail","errorCode","feedback","errorThrown","param","wikiScript","$modalTitle","$diffArea","$loading","fixedHeight","fitScreen","height","totext","topst","fromtext","frompst","post","diffTable","compare","toTitle","pageName","totitle","userLink","colspan","wgScript","fromrevid","fromtitle","fromuser","fromparsedcomment","torevid","touser","toparsedcomment","fromsize","tosize","isPreview","warnings","fromtexthidden","totexthidden","fromuserhidden","touserhidden","fromcommenthidden","tocommenthidden","code","defaultOptions","summaryRevision","editText","editNotice","jsonGet","jsonPost","pageDetail","jumpTo","userPreference","date","toUTCString","wgCurRevisionId","$editTools","$editArea","$optionsLabel","table","side","minor","postArticle","pst","insertText","strings","textarea","start","selectionStart","stop","selectionEnd","selectedText","open","middle","selectStart","setSelectionRange","focus","addBtn","icon","btns","i","btn","$open","$middle","$close","bind","contentDone","b","wikitext","pageid","fadeIn","summaryVal","sections","line","anchor","diffJson","hideBtn","fromsection","queryJson","inprop","pageids","revisions","queryDone","namespace","ns","protection","level","wgNamespaceNumber","namespaceNoticePage","pageNoticePage","meta","ammessages","wikitextNs","allmessages","wikitextPage","contentmodel","notice","beforeClose","closeNoReload","keepContent","templates","templateName","images","imageName","iiprop","imageinfo","basetimestamp","starttimestamp","errorformat","saveSuccess","saveError","setTimeout","errorInfo","errorMore","errors","warning","params","modalSize","disableeditsection","parent","question","createonly","successed","failed","fromPage","toPage","from","to","movetalk","movesubpages","noredirect","getNotice","cb","getLocal","noticeList","setLocal","includes","isViewed","viewed","noticeContainer","step","afterDone","isNaN","unshift","allSteps","$modalObj","getElementById","setButtons","$btnBefore","$btnAfter","$btnDone","setStep","updatelogsUrl","githubLink","loaded","mainFunctions"],"mappings":"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","file":"InPageEdit.js","sourcesContent":["/**\n * @method getDir\n * @return {String} 插件CDN的URL路径，结尾没有/\n *\n * @description 注意，如果您想自己自己托管InPageEdit，_dir可以直接返回您的URL\n *              例如 const _dir = https://yourdomain.com/inpageedit\n */\nfunction getDir() {\n  var thisScript = document.currentScript.src\n  var thisUrl = thisScript.split('/')\n  // 理论上入口文件位于 /dist/*.js\n  // 因此删掉最后两位路径\n  thisUrl.pop()\n  thisUrl.pop()\n  thisUrl = thisUrl.join('/')\n  return thisUrl\n}\n\n/**\n * @constant {String} _dir CDN URL\n */\nconst _dir = getDir()\n\nmodule.exports = _dir\n","var config = mw.config.get()\nconst { stepModal } = require('../module/stepModal')\nconst { $checkbox, $hr } = require('../module/_elements')\nconst { _msg } = require('../module/_msg')\n\n/**\n * @param {Boolean} force Force show the steps modal @default false\n * @returns {Promise} User options\n */\nconst beforeInstall = async (force = false) => {\n  // 创建 Deferred 类\n  var $def = $.Deferred()\n\n  // 缓存选项\n  var options = {}\n\n  // 判定是否显示\n  var skip = true\n  // 选项为强制显示\n  if (force) skip = false\n  // 从未显示过\n  if (!localStorage.getItem('InPageEditInstallGuide')) skip = false\n\n  /**\n   * @function setOption\n   * @param {Element} el DOM element\n   */\n  function setOption(el) {\n    var $el = $(el)\n    var id = $el.attr('id')\n    if (!id) return\n    var val\n    if ($el.attr('type') === 'checkbox') {\n      val = $el.prop('checked')\n    } else {\n      val = $el.val()\n    }\n    options[id] = val\n    console.info('[InPageEdit] beforeInstall setOption', `${id}: ${val}`)\n  }\n\n  if (skip) {\n    console.info('[InPageEdit] Skip InPageEdit Install guide')\n    $def.resolve(options)\n  } else {\n    // 设置步骤\n    var contents = []\n\n    // 欢迎辞\n    contents.push({\n      content: $('<div>').append(\n        $('<h3>', { text: _msg('preference-about-label') }),\n        $('<div>', { text: _msg('beforeInstall-greeting-description') }),\n        $hr,\n        $('<p>', {\n          text:\n            'InPageEdit is a useful MediaWiki JavaScript Plugin written with jQuery',\n        }),\n        $('<p>').append(\n          '© InPageEdit Copyright (C)',\n          ' 2019 - ' + new Date().getFullYear(),\n          ' Wjghj Project (机智的小鱼君), ',\n          $('<a>', {\n            href: 'https://www.gnu.org/licenses/gpl-3.0-standalone.html',\n            text: 'GNU General Public License 3.0',\n          })\n        )\n      ),\n    })\n    // 隐私政策\n    contents.push({\n      content: $('<div>').append(\n        $('<h3>', { text: _msg('beforeInstall-privacy-policy-title') }),\n        $('<div>').append(\n          $('<div>', {\n            html: _msg('beforeInstall-privacy-policy-description'),\n          }),\n          $hr,\n          $checkbox({\n            id: 'shareMyInfo',\n            label: _msg('beforeInstall-privacy-policy-label'),\n          })\n        )\n      ),\n    })\n    // 首选项\n    contents.push({\n      content: $('<div>').append(\n        $('<h3>', { text: _msg('preference-title') }),\n        $('<div>').append(\n          $('<div>', {\n            text: _msg('beforeInstall-preference-description'),\n          }).css({ 'font-size': '0.8em' }),\n          $('<h4>', { text: _msg('preference-editHobits-label') }),\n          $checkbox({ id: 'editMinor', label: _msg('preference-setMinor') }),\n          $checkbox({\n            id: 'watchList',\n            label: _msg('preference-watchList'),\n            checked: true,\n          }),\n          $checkbox({\n            id: 'watchoutSideCloseList',\n            label: _msg('preference-outSideClose'),\n            checked: true,\n          }),\n          $('<h4>', { text: _msg('preference-summary-label') }),\n          $('<label>').append(\n            $('<span>', { html: _msg('preference-editSummary') }),\n            $('<input>', {\n              id: 'editSummary',\n              value: _msg('preference-summary-default'),\n            }).css({\n              display: 'block',\n              width: '96%',\n            })\n          )\n        )\n      ),\n    })\n    // 打赏\n    if (\n      config.wgUserLanguage === 'zh' ||\n      config.wgUserLanguage === 'zh-hans' ||\n      config.wgUserLanguage === 'zh-cn'\n    ) {\n      contents.push({\n        content: $('<div>').append(\n          $('<h3>', { text: '支持作者' }),\n          $('<div>').append(\n            '该步骤拟定推送给简体中文使用者，并附上作者的收款码。但经过与部分用户的交流后，作者意识到接受打赏可能会导致冲塔，故暂时省略了此步骤。您可以直接点击下一步按钮忽略这一步。'\n          )\n        ),\n      })\n    }\n    // 完成安装\n    contents.push({\n      content: $('<div>').append(\n        $('<h3>', { text: _msg('beforeInstall-success-title') }),\n        $('<div>', { text: _msg('beforeInstall-success-description') })\n      ),\n    })\n\n    // 显示模态框\n    stepModal({\n      title: _msg('beforeInstall-title'),\n      btnBefore: _msg('beforeInstall-before-btn'),\n      btnAfter: _msg('beforeInstall-after-btn'),\n      btnDone: _msg('beforeInstall-done-btn'),\n      contents,\n      onShow(modal) {\n        var $modal = $('#' + modal.modalId)\n        function addEvent() {\n          $modal.find('input').unbind()\n          $modal.find('input').change(function () {\n            setOption(this)\n          })\n        }\n        addEvent()\n        $modal.find('.ssi-modalBtn.btn').click(addEvent)\n      },\n    }).then(() => {\n      localStorage.setItem('InPageEditInstallGuide', new Date().getTime())\n      $def.resolve(options)\n    })\n  }\n\n  // 返回 Promise\n  return $def\n}\n\nmodule.exports = {\n  beforeInstall,\n}\n","var mwApi = new mw.Api()\n\nvar getUserInfo = function () {\n  /**\n   * @description 获取用户权限信息\n   */\n  mwApi.getUserInfo().then(\n    data => {\n      console.info('[InPageEdit] 成功获取用户权限信息')\n      mw.config.set('wgUserRights', data.rights)\n    },\n    error => {\n      console.warn('[InPageEdit] 警告：无法获取用户权限信息', error)\n      mw.config.set('wgUserRights', [])\n    }\n  )\n\n  /**\n   * @description 获取封禁状态\n   */\n  if (mw.config.get('wgUserName') !== null) {\n    mwApi\n      .get({\n        action: 'query',\n        list: 'users',\n        usprop: 'blockinfo',\n        ususers: mw.config.get('wgUserName'),\n      })\n      .then(data => {\n        if (data.query.users[0].blockid) {\n          mw.config.set('wgUserIsBlocked', true)\n        } else {\n          mw.config.set('wgUserIsBlocked', false)\n        }\n      })\n  }\n}\n\nmodule.exports = {\n  getUserInfo,\n}\n","// 导入方法\nconst _dir = require('./_dir')\nconst { loadScript } = require('./loadScript')\nconst { getUserInfo } = require('./getUserInfo')\nconst { loadStyles } = require('./loadStyles')\nconst { updateNotice } = require('./updateNotice')\nconst { syncI18nData } = require('./syncI18nData')\n\nconst version = require('../module/version')\nconst { beforeInstall } = require('./beforeInstall')\n\n/**\n * @method initMain\n * @return {Object} InPageEdit\n */\nmodule.exports = async function init() {\n  mw.hook('InPageEdit.init.before').fire()\n\n  // 是否需要刷新缓存\n  const purgeCache = Boolean(\n    mw.util.getParamValue('ipe', location.href) === 'nocache' ||\n      version !== localStorage.getItem('InPageEditVersion')\n  )\n\n  // Await MediaWiki\n  await mw.loader.using(['mediawiki.api', 'mediawiki.util', 'mediawiki.user'])\n\n  // 等待前置插件\n  await loadScript(_dir + '/src/ssi_modal/ssi-modal.min.js')\n  mw.hook('InPageEdit.init.modal').fire({ ssi_modal: window.ssi_modal })\n\n  // 加载样式表\n  loadStyles(purgeCache)\n\n  // 等待 i18n 缓存\n  await syncI18nData(purgeCache)\n  mw.hook('InPageEdit.init.i18n').fire({ _msg: require('../module/_msg')._msg })\n\n  // 导入全部模块\n  const { _analysis } = require('../module/_analysis')\n  const { _msg } = require('../module/_msg')\n  const { about } = require('../module/about')\n  const api = require('../module/api.json')\n  const { articleLink } = require('../module/articleLink')\n  const { findAndReplace } = require('../module/findAndReplace')\n  const { linksHere } = require('../module/linksHere')\n  const { loadQuickDiff } = require('../module/loadQuickDiff')\n  const { preference } = require('../module/preference')\n  const { pluginStore } = require('../module/pluginStore')\n  const { progress } = require('../module/progress')\n  const { quickDelete } = require('../module/quickDelete')\n  const { quickDiff } = require('../module/quickDiff')\n  const { quickEdit } = require('../module/quickEdit')\n  const { quickPreview } = require('../module/quickPreview')\n  const { quickRedirect } = require('../module/quickRedirect')\n  const { quickRename } = require('../module/quickRename')\n  const { specialNotice } = require('../module/specialNotice')\n  const { versionInfo } = require('../module/versionInfo')\n\n  // 等待安装前置步骤\n  var installOpt = await beforeInstall()\n  console.info('[InPageEdit]', 'Install options', installOpt)\n\n  // 初始化前置模块\n  preference.set()\n  preference.set(installOpt)\n  getUserInfo()\n  loadQuickDiff()\n  articleLink()\n  updateNotice()\n  // specialNotice()\n\n  // !暂定，触发用户插件\n  pluginStore.initUserPlugin()\n\n  // 写入模块\n  var InPageEdit = {\n    _dir,\n    about,\n    api,\n    articleLink,\n    beforeInstall,\n    findAndReplace,\n    linksHere,\n    loadQuickDiff,\n    preference,\n    progress,\n    quickDelete,\n    quickDiff,\n    quickEdit,\n    quickPreview,\n    quickRedirect,\n    quickRename,\n    specialNotice,\n    version,\n    versionInfo,\n    // 别名 Alias\n    fnr: findAndReplace,\n    delete: quickDelete,\n    diff: quickDiff,\n    edit: quickEdit,\n    preview: quickPreview,\n    redirect: quickRedirect,\n    quickMove: quickRename,\n    rename: quickRename,\n  }\n\n  // 锁定重要变量\n  var importantVariables = ['_dir', 'api', 'version']\n  importantVariables.forEach(key => {\n    try {\n      Object.freeze(InPageEdit[key])\n    } catch (e) {\n      // Do nothing\n    }\n  })\n\n  // 触发钩子，传入上下文\n  mw.hook('InPageEdit').fire({\n    _analysis,\n    _msg,\n    InPageEdit,\n  })\n\n  // 花里胡哨的加载提示\n  console.info(\n    '    ____      ____                   ______    ___ __ \\n   /  _/___  / __ \\\\____ _____ ____  / ____/___/ (_) /_\\n   / // __ \\\\/ /_/ / __ `/ __ `/ _ \\\\/ __/ / __  / / __/\\n _/ // / / / ____/ /_/ / /_/ /  __/ /___/ /_/ / / /_  \\n/___/_/ /_/_/    \\\\__,_/\\\\__, /\\\\___/_____/\\\\__,_/_/\\\\__/  \\n                      /____/                v' +\n      version\n  )\n\n  // 传回InPageEdit\n  return InPageEdit\n}\n","var loadScript = function (src, noCache) {\n  return $.ajax({\n    url: src,\n    dataType: 'script',\n    crossDomain: true,\n    cache: !noCache,\n  })\n}\n\nmodule.exports = {\n  loadScript,\n}\n","const _dir = require('./_dir')\n\nfunction loadStyles(purge) {\n  // 放在越上面优先级越高\n  const styleFiles = [\n    // Default Skin\n    '/src/skin/ipe-default.min.css',\n    // ssi-modal Style\n    '/src/ssi_modal/ssi-modal.min.css',\n    // FontAwesome\n    'https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css',\n  ]\n\n  styleFiles.forEach(link => {\n    if (/^https?:\\/\\//.test(link) !== true) {\n      link = _dir + link\n    }\n    if (purge) {\n      link += '?timestamp' + new Date().getTime()\n    }\n    $('head').prepend(\n      $('<link>', { href: link, rel: 'stylesheet', 'data-ipe': 'style' })\n    )\n  })\n}\n\nmodule.exports = {\n  loadStyles,\n}\n","var config = mw.config.get()\n\nconst _dir = require('./_dir')\n\n// 设置\nconst cacheTime = 2 * 60 * 60 * 1000\nconst cacheUrl = _dir + '/i18n/languages.json'\nconst funcName = 'InPageEdit'\nconst localCacheName = 'i18n-cache-' + funcName + '-content'\nconst localCacheTime = 'i18n-cache-' + funcName + '-timestamp'\n\n/**\n * @method i18n Get i18n data\n * @param {Boolean} noCache true - forced no cache\n */\nasync function syncI18nData(noCache) {\n  const now = new Date().getTime()\n  // 如果语言为 qqx，不返回任何东西\n  if (config.wgUserLanguage === 'qqx') {\n    console.warn('[InPageEdit] User language is qqx')\n    return true\n  }\n  // 缓存存在且缓存未过期\n  if (\n    localStorage.getItem(localCacheName) &&\n    now - localStorage.getItem(localCacheTime) < cacheTime &&\n    !noCache\n  ) {\n    var json = {}\n    try {\n      json = JSON.parse(localStorage.getItem(localCacheName))\n    } catch (e) {\n      console.warn('[InPageEdit] i18n 数据不合法')\n      await getOriginalData()\n      return true\n    }\n    if (json.en) {\n      return true\n    } else {\n      console.warn('[InPageEdit] i18n 数据可能已损坏')\n      await getOriginalData()\n      return true\n    }\n  } else {\n    await getOriginalData()\n    return true\n  }\n}\n\n/**\n * @function saveToCache\n */\nfunction saveToCache(data) {\n  const now = new Date().getTime()\n  data = JSON.stringify(data)\n  localStorage.setItem(localCacheName, data)\n  localStorage.setItem(localCacheTime, now)\n}\n\n/**\n * @function getOriginalData\n */\nasync function getOriginalData() {\n  console.time('[InPageEdit] 从远程获取 i18n 数据')\n  var data = await $.getJSON(cacheUrl, {\n    cache: false,\n    timestamp: new Date().getTime(),\n  })\n  if (typeof data !== 'object') data = {}\n  saveToCache(data)\n  console.timeEnd('[InPageEdit] 从远程获取 i18n 数据')\n  return data\n}\n\nmodule.exports = {\n  syncI18nData,\n}\n","const version = require('../module/version')\n\nconst { _msg } = require('../module/_msg')\n// const api = require('../module/api.json');\nconst { versionInfo } = require('../module/versionInfo')\nconst { specialNotice } = require('../module/specialNotice')\n\nfunction updateNotice() {\n  if (localStorage.getItem('InPageEditVersion') !== version) {\n    ssi_modal.notify('', {\n      title: _msg('updatelog-update-success-title'),\n      content: _msg('updatelog-update-success', version),\n      className: 'in-page-edit',\n      buttons: [\n        {\n          className: 'btn btn-primary',\n          label: _msg('updatelog-button-versioninfo'),\n          method(a, modal) {\n            localStorage.setItem('InPageEditVersion', version)\n            versionInfo()\n            modal.close()\n          },\n        },\n      ],\n      closeAfter: {\n        time: 10,\n        resetOnHover: true,\n      },\n      onClose() {\n        localStorage.setItem('InPageEditVersion', version)\n        // ssi_modal.notify('', {\n        //   className: 'in-page-edit',\n        //   content: _msg('updatelog-after-close', `[${api.updatelogsUrl} ${api.updatelogsUrl}]`, `[${api.githubLink}/issues ${_msg('updatelog-file-issue')}]`),\n        //   closeAfter: {\n        //     time: 10\n        //   },\n        //   buttons: [{\n        //     className: 'btn btn-primary',\n        //     label: _msg('ok'),\n        //     method(a, modal) {\n        //       modal.close();\n        //     }\n        //   }]\n        // });\n      },\n    })\n  }\n  if (localStorage.getItem('InPageEditNoticeId') !== _msg('noticeid')) {\n    specialNotice()\n  }\n}\n\nmodule.exports = {\n  updateNotice,\n}\n","var config = mw.config.get()\nvar api = require('./api.json')\n\nconst { preference } = require('./preference.js')\n\n/**\n * @module _analysis 提交统计信息模块\n * @param {String} functionID 模块ID，例如 quick_edit\n */\nconst _analysis = function (functionID) {\n  if (preference.get('shareMyInfo') !== true) {\n    return\n  }\n  var submitdata = {\n    action: 'submit',\n    url: config.wgServer + config.wgArticlePath.replace('$1', ''),\n    sitename: config.wgSiteName,\n    username: config.wgUserName,\n    function: functionID,\n  }\n  $.ajax({\n    url: api.analysis,\n    data: submitdata,\n    type: 'post',\n    dataType: 'json',\n  }).done(function (data) {\n    console.log(\n      '[InPageEdit] Analysis response\\nStatus: ' +\n        data.status +\n        '\\nMessage: ' +\n        data.msg\n    )\n  })\n}\n\nmodule.exports = {\n  _analysis,\n}\n","/**\n * @module _elements 常用html元素\n */\n\nvar { getUrl } = mw.util\n\nvar $br = '<br>'\nvar $button = ({ type, text, html, href, link }) => {\n  html = html || text\n  href = href || link\n  var $btn = $('<button>', { class: type ? 'btn btn-' + type : 'btn', html })\n  if (href || link) {\n    var target = ''\n    if (/^https?:\\/\\//.test(href)) target = '_blank'\n    var $a = $('<a>', { target, href })\n    $btn.appendTo($a)\n  }\n  return $btn\n}\nvar $hr = '<hr>'\nvar $link = ({ page, link, href, text, html }) => {\n  href = href || link || 'javascript:void(0);'\n  if (page) href = getUrl(page)\n  html = html || text\n  if (page && !html) html = page\n  if (!html) html = href\n  var target = ''\n  if (/^https?:\\/\\//.test(href)) target = '_blank'\n  return $('<a>', { href, target, html })\n}\nvar $progress =\n  '<div class=\"ipe-progress\" style=\"width: 100%\"><div class=\"ipe-progress-bar\"></div></div>'\nvar $checkbox = ({ label, checked, id, className }) => {\n  return $('<label>', { class: className })\n    .append(\n      $('<input>', { type: 'checkbox', checked, id }),\n      $('<span>', { class: 'ipe-checkbox-box' }),\n      $('<span>', { html: label })\n    )\n    .css({\n      display: 'block',\n    })\n}\n\nmodule.exports = {\n  $br,\n  br: $br,\n  $button,\n  $hr,\n  hr: $hr,\n  $link,\n  $progress,\n  progress: $progress,\n  $checkbox,\n}\n","var config = mw.config.get()\n\n/**\n * @module _hasRight 是否拥有权限\n * @param {String} right\n * @return {Boolean}\n */\nconst _hasRight = function (right) {\n  if (config.wgUserIsBlocked === true) {\n    return false\n  }\n  if (mw.config.get('wgUserRights').indexOf(right) > -1) {\n    return true\n  } else {\n    return false\n  }\n}\n\nmodule.exports = {\n  _hasRight,\n}\n","const funcName = 'InPageEdit'\nconst userLang = mw.config.get('wgUserLanguage')\nconst fallbacks = {\n  ab: 'ru',\n  ace: 'id',\n  aln: 'sq',\n  als: 'gsw',\n  an: 'es',\n  anp: 'hi',\n  arn: 'es',\n  arz: 'ar',\n  av: 'ru',\n  ay: 'es',\n  ba: 'ru',\n  bar: 'de',\n  'bat-smg': 'sgs',\n  bcc: 'fa',\n  'be-x-old': 'be-tarask',\n  bh: 'bho',\n  bjn: 'id',\n  bm: 'fr',\n  bpy: 'bn',\n  bqi: 'fa',\n  bug: 'id',\n  'cbk-zam': 'es',\n  ce: 'ru',\n  ckb: 'ckb-arab',\n  crh: 'crh-latn',\n  'crh-cyrl': 'ru',\n  csb: 'pl',\n  cv: 'ru',\n  'de-at': 'de',\n  'de-ch': 'de',\n  'de-formal': 'de',\n  dsb: 'de',\n  dtp: 'ms',\n  eml: 'it',\n  ff: 'fr',\n  'fiu-vro': 'vro',\n  frc: 'fr',\n  frp: 'fr',\n  frr: 'de',\n  fur: 'it',\n  gag: 'tr',\n  gan: 'gan-hant',\n  'gan-hans': 'zh-hans',\n  'gan-hant': 'zh-hant',\n  gl: 'pt',\n  glk: 'fa',\n  gn: 'es',\n  gsw: 'de',\n  hif: 'hif-latn',\n  hsb: 'de',\n  ht: 'fr',\n  ii: 'zh-cn',\n  inh: 'ru',\n  iu: 'ike-cans',\n  jut: 'da',\n  jv: 'id',\n  kaa: 'kk-latn',\n  kbd: 'kbd-cyrl',\n  'kbd-cyrl': 'ru',\n  khw: 'ur',\n  kiu: 'tr',\n  kk: 'kk-cyrl',\n  'kk-arab': 'kk-cyrl',\n  'kk-cn': 'kk-arab',\n  'kk-kz': 'kk-cyrl',\n  'kk-latn': 'kk-cyrl',\n  'kk-tr': 'kk-latn',\n  kl: 'da',\n  koi: 'ru',\n  'ko-kp': 'ko',\n  krc: 'ru',\n  ks: 'ks-arab',\n  ksh: 'de',\n  ku: 'ku-latn',\n  'ku-arab': 'ckb',\n  kv: 'ru',\n  lad: 'es',\n  lb: 'de',\n  lbe: 'ru',\n  lez: 'ru',\n  li: 'nl',\n  lij: 'it',\n  liv: 'et',\n  lmo: 'it',\n  ln: 'fr',\n  ltg: 'lv',\n  lzz: 'tr',\n  mai: 'hi',\n  'map-bms': 'jv',\n  mg: 'fr',\n  mhr: 'ru',\n  min: 'id',\n  mo: 'ro',\n  mrj: 'ru',\n  mwl: 'pt',\n  myv: 'ru',\n  mzn: 'fa',\n  nah: 'es',\n  nap: 'it',\n  nds: 'de',\n  'nds-nl': 'nl',\n  'nl-informal': 'nl',\n  no: 'nb',\n  os: 'ru',\n  pcd: 'fr',\n  pdc: 'de',\n  pdt: 'de',\n  pfl: 'de',\n  pms: 'it',\n  // 'pt': 'pt-br',\n  'pt-br': 'pt',\n  qu: 'es',\n  qug: 'qu',\n  rgn: 'it',\n  rmy: 'ro',\n  rue: 'uk',\n  ruq: 'ruq-latn',\n  'ruq-cyrl': 'mk',\n  'ruq-latn': 'ro',\n  sa: 'hi',\n  sah: 'ru',\n  scn: 'it',\n  sg: 'fr',\n  sgs: 'lt',\n  shi: 'ar',\n  simple: 'en',\n  sli: 'de',\n  sr: 'sr-ec',\n  srn: 'nl',\n  stq: 'de',\n  su: 'id',\n  szl: 'pl',\n  tcy: 'kn',\n  tg: 'tg-cyrl',\n  tt: 'tt-cyrl',\n  'tt-cyrl': 'ru',\n  ty: 'fr',\n  udm: 'ru',\n  ug: 'ug-arab',\n  uk: 'ru',\n  vec: 'it',\n  vep: 'et',\n  vls: 'nl',\n  vmf: 'de',\n  vot: 'fi',\n  vro: 'et',\n  wa: 'fr',\n  wo: 'fr',\n  wuu: 'zh-hans',\n  xal: 'ru',\n  xmf: 'ka',\n  yi: 'he',\n  za: 'zh-hans',\n  zea: 'nl',\n  zh: 'zh-hans',\n  'zh-classical': 'lzh',\n  'zh-cn': 'zh-hans',\n  'zh-hant': 'zh-hans',\n  'zh-hk': 'zh-hant',\n  'zh-min-nan': 'nan',\n  'zh-mo': 'zh-hk',\n  'zh-my': 'zh-sg',\n  'zh-sg': 'zh-hans',\n  'zh-tw': 'zh-hant',\n  'zh-yue': 'yue',\n}\n\n/**\n * @function toObject\n * @param {String} data\n */\nfunction toObject(data) {\n  try {\n    return JSON.parse(data)\n  } catch (e) {\n    return {}\n  }\n}\n\n/**\n * Substitute arguments into the string, where arguments are represented\n * as $n where n > 0.\n *\n * @param message The message to substitute arguments into\n * @param arguments The arguments to substitute in.\n *\n * @return The resulting message.\n */\nfunction handleArgs(message, ...args) {\n  args.forEach(function (elem, index) {\n    var rgx = new RegExp('\\\\$' + (index + 1), 'g')\n    message = message.replace(rgx, elem)\n  })\n\n  return message\n}\n\n/**\n * Generate a HTML link using the supplied parameters.\n *\n * @param href The href of the link which will be converted to\n *     '/wiki/href'.\n * @param text The text and title of the link. If this is not supplied, it\n *     will default to href.\n * @param hasProtocol True if the href parameter already includes the\n *     protocol (i.e. it begins with 'http://', 'https://', or '//').\n *\n * @return The generated link.\n */\nfunction makeLink(href, text, hasProtocol, blank) {\n  text = text || href\n  href = hasProtocol ? href : mw.util.getUrl(href)\n\n  text = mw.html.escape(text)\n  href = mw.html.escape(href)\n\n  blank = blank ? 'target=\"_blank\"' : ''\n\n  return (\n    '<a href=\"' + href + '\" title=\"' + text + '\"' + blank + '>' + text + '</a>'\n  )\n}\n\n/*\n * Allow basic inline HTML tags in wikitext.does not support <a> as that's handled by the\n * wikitext links instead.\n *\n * Supports the following tags:\n * - <i>\n * - <b>\n * - <s>\n * - <br>\n * - <em>\n * - <hr>\n * - <strong>\n * - <span>\n *\n * Supports the following tag attributes:\n * - title\n * - style\n * - class\n *\n * @param html\n *\n * @return\n */\nfunction sanitiseHtml(html) {\n  var context = document.implementation.createHTMLDocument(''),\n    $html = $.parseHTML(html, /* document */ context, /* keepscripts */ false),\n    $div = $('<div>', context).append($html),\n    whitelistAttrs = ['title', 'style', 'class'],\n    whitelistTags = [\n      'b',\n      'br',\n      'code',\n      'del',\n      'em',\n      'hr',\n      'i',\n      's',\n      'strong',\n      'span',\n    ]\n\n  $div.find('*').each(function () {\n    var $this = $(this),\n      tagname = $this.prop('tagName').toLowerCase(),\n      attrs,\n      array,\n      style\n\n    if (whitelistTags.indexOf(tagname) === -1) {\n      mw.log('[I18n-js] Disallowed tag in message: ' + tagname)\n      $this.remove()\n      return\n    }\n\n    attrs = $this.prop('attributes')\n    array = Array.prototype.slice.call(attrs)\n\n    array.forEach(function (attr) {\n      if (whitelistAttrs.indexOf(attr.name) === -1) {\n        mw.log(\n          '[I18n-js] Disallowed attribute in message: ' +\n            attr.name +\n            ', tag: ' +\n            tagname\n        )\n        $this.removeAttr(attr.name)\n        return\n      }\n\n      // make sure there's nothing nasty in style attributes\n      if (attr.name === 'style') {\n        style = $this.attr('style')\n\n        if (style.indexOf('url(') > -1) {\n          mw.log('[I18n-js] Disallowed url() in style attribute')\n          $this.removeAttr('style')\n\n          // https://phabricator.wikimedia.org/T208881\n        } else if (style.indexOf('var(') > -1) {\n          mw.log('[I18n-js] Disallowed var() in style attribute')\n          $this.removeAttr('style')\n        }\n      }\n    })\n  })\n\n  return $div.prop('innerHTML')\n}\n\n/*\n * Parse some basic wikitext into HTML. Also supports basic inline HTML tags.\n *\n * Will process:\n * - http/https\n * - [url text]\n * - [[pagename]]\n * - [[pagename|text]]\n * - {{PLURAL:count|singular|plural}}\n * - {{GENDER:gender|masculine|feminine|neutral}}\n *\n * @param message The message to process.\n *\n * @return The resulting string.\n */\nfunction parseWikitext(message) {\n  // [url text] -> [$1 $2]\n  var urlRgx = /\\[((?:https?:)?\\/\\/.+?) (.+?)\\]/g,\n    // [[pagename]] -> [[$1]]\n    simplePageRgx = /\\[\\[([^|]*?)\\]\\]/g,\n    // [[pagename|text]] -> [[$1|$2]]\n    pageWithTextRgx = /\\[\\[(.+?)\\|(.+?)\\]\\]/g,\n    // {{PLURAL:count|singular|plural}} -> {{PLURAL:$1|$2}}\n    pluralRgx = /\\{\\{PLURAL:(\\d+)\\|(.+?)\\}\\}/gi,\n    // {{GENDER:gender|masculine|feminine|neutral}} -> {{GENDER:$1|$2}}\n    genderRgx = /\\{\\{GENDER:([^|]+)\\|(.+?)\\}\\}/gi\n\n  if (message.indexOf('<') > -1) {\n    message = sanitiseHtml(message)\n  }\n\n  return (\n    message\n      .replace(urlRgx, function (_match, href, text) {\n        return makeLink(href, text, true, true)\n      })\n      // .replace(httpRgx, function (_match, before, href, after) {\n      //   return before + makeLink(href, href, true, true) + after;\n      // })\n      .replace(simplePageRgx, function (_match, href) {\n        return makeLink(href)\n      })\n      .replace(pageWithTextRgx, function (_match, href, text) {\n        return makeLink(href, text)\n      })\n      .replace(pluralRgx, function (_match, count, forms) {\n        return mw.language.convertPlural(Number(count), forms.split('|'))\n      })\n      .replace(genderRgx, function (_match, gender, forms) {\n        return mw.language.gender(gender, forms.split('|'))\n      })\n  )\n}\n\n/**\n * @function parseMessage\n * @param {String} msg\n * @param  {...Sting} args\n */\nfunction parseMessage(msg, ...args) {\n  msg = handleArgs(msg, ...args)\n  msg = parseWikitext(msg)\n  return msg\n}\n\n/**\n * @function rawMessage\n */\nfunction getMessage(lang, msgKey, ...args) {\n  const i18nCache =\n    localStorage.getItem('i18n-cache-' + funcName + '-content') || '{}'\n\n  // qqx\n  if (lang === 'qqx') {\n    var after = ''\n    if (args.length > 0) {\n      after = ': ' + args.join(', ')\n    }\n    return `(${funcName.toLowerCase()}-${msgKey}${after})`\n  }\n\n  // 获取 i18n\n  var cacheMessages = toObject(i18nCache)\n\n  // 查询本地覆写\n  var ipe = window.InPageEdit || {}\n  var overrides = ipe.i18n || {}\n  // InPageEdit.i18n.lang.msgKey\n  if (overrides[lang] && overrides[lang][msgKey]) {\n    return parseMessage(overrides[lang][msgKey], ...args)\n  }\n  // InPageEdit.i18n.msgKey\n  if (overrides[msgKey]) {\n    return parseMessage(overrides[msgKey], ...args)\n  }\n\n  // 查询用户语言\n  if (cacheMessages[lang] && cacheMessages[lang][msgKey]) {\n    return parseMessage(cacheMessages[lang][msgKey], ...args)\n  }\n\n  // 如果到了这一步，意味着消息不存在\n  if (lang === 'en') {\n    return `<${funcName}-${msgKey}>`\n  }\n\n  // 转换用户语言后再试，例如 zh => zh-hans, zh-tw => zh-hant\n  lang = fallbacks[lang] || 'en'\n  return getMessage(lang, msgKey, ...args)\n}\n\n/**\n * @module _msg\n * @param {String} msgKey 消息的键\n * @param  {String} args 替代占位符($1, $2...)的内容，可以解析简单的wikitext\n */\nvar _msg = function (msgKey, ...args) {\n  return getMessage(userLang, msgKey, ...args)\n}\n\nmodule.exports = {\n  _msg,\n}\n","const { _msg } = require('./_msg')\nconst { _hasRight } = require('./_hasRight')\n\nconst { quickDelete } = require('./quickDelete')\nconst { quickEdit } = require('./quickEdit')\n\n/**\n * @module _resolveExists 解决目标页面已存在的问题\n * @param {String} page 需要解决的页面\n * @param {Object|String} reason 填字符串则直接指定两种原因\n * @param {String} reason.delete 删除原因\n * @param {String} reason.edit 编辑原因\n */\nvar _resolveExists = function (page, reason = {}) {\n  var canDelete = _hasRight('delete')\n\n  if (typeof reason === 'string') {\n    reason = {\n      delete: reason,\n      edit: reason,\n    }\n  }\n\n  ssi_modal.show({\n    className: 'in-page-edit resovle-exists',\n    sizeClass: 'dialog',\n    center: true,\n    outSideClose: false,\n    title: _msg('target-exists-title'),\n    content: _msg(\n      canDelete ? 'target-exists-can-delete' : 'target-exists-no-delete',\n      page\n    ),\n    buttons: [\n      {\n        className: 'btn btn-danger btn-exists-delete-target',\n        label: _msg('quick-delete'),\n        method(a, modal) {\n          modal.close()\n          quickDelete(page, reason.delete || null)\n        },\n      },\n      {\n        className: 'btn btn-primary',\n        label: _msg('quick-edit'),\n        method() {\n          quickEdit({\n            page: page,\n            summary: reason.edit ? '[InPageEdit] ' + reason : null,\n            reload: false,\n          })\n        },\n      },\n      {\n        className: 'btn btn-secondary' + (canDelete ? ' btn-single' : ''),\n        label: _msg('cancel'),\n        method: (a, modal) => {\n          modal.close()\n        },\n      },\n    ],\n    onShow: () => {\n      if (!canDelete) {\n        $('.btn-exists-delete-target').hide()\n      }\n    },\n  })\n}\n\nmodule.exports = {\n  _resolveExists,\n}\n","const { _msg } = require('./_msg')\n\nconst api = require('./api.json')\n\n/**\n * @module about 关于插件模块\n * @description Show \"What is\" modal box of IPE2\n */\nvar about = function () {\n  ssi_modal.show({\n    title: _msg('preference-about-label'),\n    className: 'in-page-edit in-page-edit-about',\n    content: $('<section>').append(\n      $('<iframe>', {\n        style: 'margin: 0;padding: 0;width: 100%;height: 80vh;border: 0;',\n        src: api.aboutUrl,\n      })\n    ),\n  })\n}\n\nmodule.exports = {\n  about,\n}\n","var config = mw.config.get()\nconst { _msg } = require('./_msg')\n\nconst { preference } = require('./preference')\nconst { quickEdit } = require('./quickEdit')\n\nconst { getParamValue } = mw.util\n\n/**\n * @module articleLink 获取段落编辑以及编辑链接\n * @param {Sting|Element} el jQuery element to find edit links\n */\nvar articleLink = function (el) {\n  if (el === undefined) {\n    if (preference.get('redLinkQuickEdit') === true) {\n      el = $('#mw-content-text a')\n    } else {\n      el = $('#mw-content-text a:not(.new)')\n    }\n  }\n  el = $(el)\n  $.each(el, function (_, item) {\n    var $this = $(item)\n    if ($this.attr('href') === undefined) return\n    var url = $this.attr('href'),\n      action = getParamValue('action', url) || getParamValue('veaction', url),\n      title = getParamValue('title', url),\n      section = getParamValue('section', url)\n        ? getParamValue('section', url).replace(/T-/, '')\n        : null,\n      revision = getParamValue('oldid', url)\n\n    // 不是本地编辑链接\n    if (!RegExp('^' + config.wgServer).test(url) && !RegExp('^/').test(url))\n      return\n\n    // 不是 index.php?title=FOO 形式的url\n    if (title === null) {\n      title = url.replace(config.wgServer, '')\n      title = title.split('?')[0]\n      title = title.replace(config.wgArticlePath.replace('$1', ''), '')\n    }\n\n    if (action === 'edit' && title !== undefined) {\n      $this.addClass('ipe-articleLink-resolved').after(\n        $('<span>', {\n          class: 'in-page-edit-article-link-group',\n        }).append(\n          $('<a>', {\n            href: 'javascript:void(0)',\n            class: 'in-page-edit-article-link',\n            text: _msg('quick-edit'),\n          }).click(function () {\n            var options = {}\n            options.page = decodeURI(title)\n            if (revision !== null) {\n              options.revision = revision\n            } else if (section !== null) {\n              options.section = section\n            }\n            if (!config.wgIsArticle) options.reload = false\n            quickEdit(options)\n          })\n        )\n      )\n    }\n  })\n}\n\nmodule.exports = {\n  articleLink,\n}\n","const { _msg } = require('./_msg')\nconst { $br } = require('./_elements')\n\n/**\n * @module findAndReplace 查找替换模块\n * @param {element} element Textarea\n */\nfunction findAndReplace(element) {\n  if (element === undefined)\n    element = $('.in-page-edit.ipe-editor:last .editArea')\n  var origin = element.val()\n\n  ssi_modal.show({\n    className: 'in-page-edit',\n    sizeClass: 'dialog',\n    center: true,\n    outSideClose: false,\n    // position: 'right bottom',\n    title: _msg('fAndR-title'),\n    content: $('<div>', { class: 'module far-module' }).append(\n      $('<div>', { class: 'module_content', id: 'findfielddiv' }).append(\n        $('<section>').append(\n          $('<h4>', { text: _msg('fAndR-find-text') }),\n          $('<textarea>', { id: 'find_this', style: 'margin: 0', rows: 4 }),\n          $('<h4>', { text: _msg('fAndR-replace-text') }),\n          $('<textarea>', { id: 'replace_with', style: 'margin: 0', rows: 4 })\n        ),\n        $('<section>', { style: 'padding: 7px 0' }).append(\n          $('<label>').append(\n            $('<input>', { type: 'checkbox', id: 'globl', checked: '' }),\n            $('<span>', { text: _msg('fAndR-globl') })\n          ),\n          $br,\n          $('<label>').append(\n            $('<input>', { type: 'checkbox', id: 'case_sen' }),\n            $('<span>', { text: _msg('fAndR-case-sen') })\n          ),\n          $br,\n          $('<label>').append(\n            $('<input>', { type: 'checkbox', id: 'regex_search' }),\n            $('<span>', { text: _msg('fAndR-enable-regex') })\n          )\n        )\n      )\n    ),\n    buttons: [\n      {\n        label: _msg('fAndR-button-undo'),\n        className: 'btn btn-danger',\n        method() {\n          element.val(origin)\n          ssi_modal.notify('info', {\n            className: 'in-page-edit',\n            title: _msg('notify-info'),\n            content: _msg('notify-fAndR-undo'),\n          })\n          // modal.close();\n        },\n      },\n      {\n        className: 'btn btn-primary',\n        label: _msg('fAndR-button-replace'),\n        method() {\n          /**\n           * 查找替换主函数\n           * 借鉴：https://dev.fandom.com/wiki/MediaWiki:FindAndReplace/code.js\n           **/\n          if ($('#find_this').val() === '') return\n          var searchfor = '',\n            searchexp,\n            $textarea = element,\n            replacewith = $('#replace_with').val().replace(/\\r/gi, ''),\n            text = $textarea.val().replace(/\\r/gi, ''),\n            flagg = 'g',\n            flagi = 'i',\n            enableregex = 0\n\n          if ($('#globl').prop('checked') === false) {\n            flagg = ''\n          }\n          if ($('#case_sen').prop('checked') === true) {\n            flagi = ''\n          }\n          if ($('#regex_search').prop('checked') === true) {\n            enableregex = 1\n          }\n          var flags = flagg + flagi + 'm'\n          if (enableregex === 1) {\n            searchfor = $('#find_this').val()\n          } else {\n            searchfor = $('#find_this')\n              .val()\n              .replace(/\\r/gi, '')\n              .replace(/([.*+?^=!:${}()|[\\]/\\\\])/g, '\\\\$1')\n          }\n          searchexp = new RegExp(searchfor, flags)\n          var rcount = 0\n          var matched = text.match(searchexp)\n          if (matched !== null) {\n            rcount = matched.length\n          }\n          text = text.replace(searchexp, replacewith)\n          $textarea.val(text)\n          ssi_modal.notify('success', {\n            className: 'in-page-edit',\n            title: _msg('notify-success'),\n            content: _msg('notify-fAndR-done', rcount),\n          })\n          // modal.close();\n        },\n      },\n    ],\n  })\n}\n\nmodule.exports = {\n  findAndReplace,\n}\n","/**\n * @module linksHere\n */\n\nconst { quickEdit } = require('./quickEdit')\nconst { _analysis } = require('./_analysis')\nconst { $progress, $link } = require('./_elements')\nconst { _msg } = require('./_msg')\n\nvar mwApi = new mw.Api()\nvar config = mw.config.get()\n\n/**\n * @function isFile\n * @returns {Boolean} Is file page?\n */\nvar isFile = title => {\n  var fileReg = new RegExp(`^(File|${config.wgFormattedNamespaces[6]}):`)\n  return fileReg.test(title)\n}\n\n/**\n * @function getList\n * @param {Sting} title\n */\nvar getList = title => {\n  var opt = {\n    format: 'json',\n    action: 'query',\n    prop: isFile(title) ? 'fileusage' : 'linkshere',\n    titles: title,\n  }\n  if (isFile(title)) {\n    opt.fulimit = 'max'\n  } else {\n    opt.lhlimit = 'max'\n  }\n  return mwApi.get(opt)\n}\n\n/**\n * @function makeList\n * @param {Object} list\n */\nvar makeList = list => {\n  var $list = $('<ol>', { class: 'ipe-links-here-list' })\n  $.each(list, (index, { title, redirect }) => {\n    $list.append(\n      $('<li>').append(\n        $link({ page: title }).attr('target', '_blank'),\n        redirect !== undefined\n          ? ' (<i>' + _msg('links-here-isRedirect') + '</i>)'\n          : '',\n        ' (',\n        $link({ text: '← ' + _msg('links-here') }).click(function () {\n          linksHere(title)\n        }),\n        ' | ',\n        $link({ text: _msg('quick-edit') }).click(function () {\n          quickEdit({\n            page: title,\n            require: false,\n          })\n        }),\n        ')'\n      )\n    )\n  })\n  return $list\n}\n\n/**\n * @module linksHere\n * @param {String} title\n */\nasync function linksHere(title = config.wgPageName) {\n  _analysis('linkshere')\n\n  if (!title || typeof title !== 'string') title = config.wgPageName\n\n  // 构建内容\n  var $progressBar = $($progress)\n  var $content = $('<div>').append($progressBar)\n\n  // 构建模态框\n  var modal = ssi_modal\n    .createObject({\n      className: 'in-page-edit ipe-links-here',\n      center: true,\n      sizeClass: 'dialog',\n      onShow(modal) {\n        mw.hook('InPageEdit.linksHere').fire({\n          modal,\n          $modal: $('#' + modal.modalId),\n        })\n      },\n    })\n    .init()\n\n  // 设定模态框\n  modal.setTitle(_msg('links-here-title', title, 2))\n  modal.setContent($content)\n\n  // 显示模态框\n  modal.show()\n\n  // 异步操作\n  try {\n    console.info('[InPageEdit] linksHere', '开始获取页面信息')\n    const data = await getList(title)\n    const { pages } = data.query\n    console.info('[InPageEdit] linksHere', '成功获取页面信息')\n    var pageId = Object.keys(pages)[0]\n    var pageList = []\n    // 判定为文件还是一般页面\n    if (isFile(title)) {\n      pageList = pages[pageId].fileusage || []\n    } else {\n      pageList = pages[pageId].linkshere || []\n    }\n    $progressBar.hide()\n    // 如果存在页面，则插入列表，否则显示提示\n    if (pageList.length > 0) {\n      var $list = makeList(pageList)\n      $content.append($list)\n    } else {\n      $content.append(\n        $('<div>', {\n          class: 'ipe-links-here-no-page',\n          html: _msg('links-here-no-page', title),\n        })\n      )\n    }\n    // 配置西文单数名词\n    if (pageList.length < 2) {\n      modal.setTitle(_msg('links-here-title', title, 1))\n    }\n    // pageId 是一个字符串，MediaWiki NM$L\n    // pageId 为 \"-1\" 则意味着请求的页面似乎不存在\n    // 但这不意味着不会有链入页面\n    if (pageId === '-1') {\n      $content.append(\n        $('<div>', {\n          html: _msg('links-here-not-exist', title),\n          class: 'ipe-links-here-not-exist',\n        })\n      )\n    }\n    // 发射钩子\n    mw.hook('InPageEdit.linksHere.pageList').fire(pageList)\n    return pageList\n  } catch (err) {\n    $progressBar.hide()\n    $content.append($('<p>', { class: 'error', html: err }))\n    console.error('[InPageEdit] linksHere', '获取页面信息时出现问题', err)\n    return err\n  }\n}\n\nmodule.exports = {\n  linksHere,\n}\n","var config = mw.config.get()\nconst { _msg } = require('./_msg')\nconst { _analysis } = require('./_analysis')\n\nconst { quickDiff } = require('./quickDiff')\n\n/**\n * @module loadQuickDiff 在特定页面查询差异链接并绑定快速差异\n */\nvar loadQuickDiff = function () {\n  // 最近更改\n  function addLink() {\n    $(\n      '.mw-changeslist-groupdiff, .mw-changeslist-diff, .mw-changeslist-diff-cur, .mw-history-histlinks a'\n    ).unbind('click', ipeDiffLink)\n    var ipeDiffLink = $(\n      '.mw-changeslist-groupdiff, .mw-changeslist-diff, .mw-changeslist-diff-cur, .mw-history-histlinks a'\n    ).click(function (e) {\n      e.preventDefault()\n      _analysis('quick_diff_recentchanges')\n      var $this = $(this),\n        href = $this.attr('href'),\n        diff = mw.util.getParamValue('diff', href),\n        curid = mw.util.getParamValue('curid', href),\n        oldid = mw.util.getParamValue('oldid', href)\n      if (diff === '0') {\n        quickDiff({ fromrev: oldid, toid: curid })\n      } else if (diff === 'prev' || diff === 'next' || diff === 'cur') {\n        quickDiff({ fromrev: oldid, torelative: diff })\n      } else {\n        quickDiff({ fromrev: oldid, torev: diff })\n      }\n    })\n  }\n  if ($('.mw-rcfilters-enabled').length > 0) {\n    setInterval(addLink, 500)\n    $('.mw-rcfilters-enabled').addClass('ipe-continuous-active')\n  } else {\n    addLink()\n  }\n  // 查看历史页面的比较按钮与快速编辑\n  if (config.wgAction === 'history') {\n    $('.historysubmit.mw-history-compareselectedversions-button').after(\n      $('<button>')\n        .text(_msg('quick-diff'))\n        .click(function (e) {\n          e.preventDefault()\n          _analysis('quick_diff_history_page')\n          var before = $('.selected.before').attr('data-mw-revid'),\n            after = $('.selected.after').attr('data-mw-revid')\n          quickDiff({ fromrev: after, torev: before })\n        })\n    )\n    $('[data-mw-revid]').each(function () {\n      var $this = $(this),\n        oldid = $this.attr('data-mw-revid')\n      $this\n        .find('.mw-history-undo')\n        .after(\n          $('<span>').html(\n            ' | <a class=\"in-page-edit-article-link\" href=\"javascript:void(0);\" onclick=\"InPageEdit.quickEdit({page:mw.config.get(\\'wgPageName\\'),revision:' +\n              oldid +\n              '});\">' +\n              _msg('quick-edit') +\n              '</a>'\n          )\n        )\n    })\n  }\n}\n\nmodule.exports = {\n  loadQuickDiff,\n}\n","// const _dir = require('../method/_dir');\n// const { _msg } = require('./_msg');\nconst pluginCDN = require('./api.json').pluginCDN\n\n/**\n * @module pluginStore 加载InPageEdit插件\n */\nvar pluginStore = {\n  /**\n   * @module pluginStore.get 获取官方插件\n   */\n  get() {\n    return $.ajax({\n      url: pluginCDN + '/index.json',\n      dataType: 'json',\n      crossDomain: true,\n      cache: false,\n    })\n  },\n  saveCache(data) {\n    var ipe = window.InPageEdit || {}\n    ipe.cache = ipe.cache || {}\n    ipe.cache.pluginList = data\n    window.InPageEdit = ipe\n  },\n  loadCache() {\n    var ipe = window.InPageEdit || {}\n    ipe.cache = ipe.cache || {}\n    return ipe.cache.pluginList\n  },\n  /**\n   * @module pluginStore.load 载入插件\n   * @param {String} name\n   */\n  load(name) {\n    if (/^https?:\\/\\//.test(name)) {\n      mw.loader.load(name)\n      console.info('[InPageEdit] 从远程加载非官方插件', name)\n    } else {\n      const { loadScript } = require('../method/loadScript')\n      loadScript(pluginCDN + '/plugins/' + name).then(\n        () => console.info('[InPageEdit] 插件 ' + name + ' 加载成功'),\n        err => console.warn('[InPageEdit] 插件 ' + name + ' 加载失败', err)\n      )\n      console.info('[InPageEdit] 从官方插件商店加载插件', name)\n    }\n  },\n  /**\n   * @module pluginStore.initUserPlugin 初始化用户插件\n   */\n  initUserPlugin() {\n    const { preference } = require('./preference')\n    var userPlugins = preference.get('plugins')\n    if (typeof userPlugins === 'object' && userPlugins.length > 0) {\n      $.each(userPlugins, (key, val) => {\n        pluginStore.load(val)\n      })\n    }\n  },\n}\n\nmodule.exports = {\n  pluginStore,\n}\n","/**\n * @module preference 个人设置模块\n */\n\nvar InPageEdit = window.InPageEdit || {}\nvar config = mw.config.get()\n\n// const { _analysis } = require('./_analysis')\nconst { _msg } = require('./_msg')\nconst { $br, $hr, $progress, $checkbox, $button } = require('./_elements')\n\nconst api = require('./api.json')\nconst version = require('./version')\nconst { pluginStore } = require('./pluginStore')\nconst _dir = require('../method/_dir')\nconst { beforeInstall } = require('../method/beforeInstall')\n\n/**\n * @name 预设值\n * @return {object}\n */\nvar defaultSettings = {\n  editMinor: false,\n  editSummary: _msg('preference-summary-default'),\n  lockToolBox: false,\n  redLinkQuickEdit: true,\n  shareMyInfo: false,\n  outSideClose: true,\n  watchList: Boolean(mw.user.options.get('watchdefault')),\n  plugins: ['toolbox.js'],\n}\n/**\n * @name 获取设置\n * @description 合并保存在用户页的设置以及localStorage的设置，有容错机制\n * @param {string} setting 返回相应的设置，为空时返回全部设置\n * @return {object|string}\n */\n\nvar get = setting => {\n  var local = localStorage.getItem('InPageEditPreference') || '{}'\n  try {\n    local = JSON.parse(local)\n  } catch (e) {\n    local = {}\n  }\n  if (typeof InPageEdit.myPreference === 'object') {\n    local = $.extend({}, local, InPageEdit.myPreference)\n  }\n  var json = $.extend({}, defaultSettings, local)\n  if (typeof setting === 'string' && setting !== '') {\n    return json[setting] ? json[setting] : null\n  } else {\n    return json\n  }\n}\n\n/**\n * @name 保存设置\n * @param {Object|string} settingKey\n * @param {any} settingValue\n * @example 可以这样 preference.set({ key: 'value' }) 也可以 preference.set('key', 'value')\n */\nvar set = (settingKey = {}, settingValue = undefined) => {\n  var options = {}\n  if (typeof settingKey === 'string' && settingValue !== undefined) {\n    options[settingKey] = settingValue\n  } else if (typeof settingKey === 'object') {\n    options = settingKey\n  } else {\n    return\n  }\n  options = $.extend({}, preference.get(), options)\n  options = JSON.stringify(options)\n  localStorage.setItem('InPageEditPreference', options)\n}\n\n/**\n * @name 用户图形界面\n * @description 打开可视化设置窗口\n */\nvar modal = () => {\n  // 防止多开设置页面\n  if ($('#ipe-preference-form').length > 0) return\n\n  mw.hook('pluginPreference').fire()\n  preference.set()\n  var local = preference.get()\n  require('./_analysis')._analysis('plugin_setting')\n\n  /** 定义模态框内部结构 */\n  var $tabList = $('<ul>', { class: 'tab-list' }).append(\n    $('<li>').append(\n      $('<a>', { text: _msg('preference-tab-editor'), href: '#editor' })\n    ),\n    $('<li>').append(\n      $('<a>', { text: _msg('preference-tab-plugin'), href: '#plugin' })\n    ),\n    $('<li>').append(\n      $('<a>', { text: _msg('preference-tab-analysis'), href: '#analysis' })\n    ),\n    $('<li>').append(\n      $('<a>', { text: _msg('preference-tab-another'), href: '#another' })\n    ),\n    $('<li>').append(\n      $('<a>', { text: _msg('preference-tab-about'), href: '#about' })\n    )\n  )\n\n  var $tabContent = $('<div>', {\n    class: 'tab-content',\n    style: 'position: relative;',\n  }).append(\n    $('<section>', { id: 'editor' }).append(\n      $('<h3>', { text: _msg('preference-editor-title') }),\n      $('<h4>', { text: _msg('preference-editHobits-label') }),\n      $checkbox({ id: 'editMinor', label: _msg('preference-setMinor') }),\n      $checkbox({ id: 'watchList', label: _msg('preference-watchList') }),\n      $checkbox({\n        id: 'watchoutSideCloseList',\n        label: _msg('preference-outSideClose'),\n      }),\n      $('<h4>', { text: _msg('preference-summary-label') }),\n      $('<label>', {\n        for: 'editSummary',\n        style: 'padding-left: 0; font-size: small',\n        html: _msg('preference-editSummary'),\n      }),\n      $('<input>', {\n        id: 'editSummary',\n        style: 'width: 96%',\n        placeholder: 'Edit via InPageEdit, yeah~',\n      })\n    ),\n    $('<section>', { id: 'plugin' }).append(\n      $('<h3>', { text: _msg('preference-plugin-title') }),\n      $('<div>', {\n        id: 'plugin-container',\n        html: $($progress).css({\n          width: '96%',\n          position: 'absolute',\n          top: '50%',\n          transform: 'translateY(-50%)',\n        }),\n      }),\n      $('<div>', { class: 'plugin-footer' }).html(\n        _msg('preference-plugin-footer', api.pluginGithub)\n      )\n    ),\n    $('<section>', { id: 'analysis' }).append(\n      $('<h3>', { text: _msg('preference-analysis-title') }),\n      $('<div>', {\n        id: 'analysis-container',\n      }).append(\n        $('<label>').append(\n          $('<input>', { type: 'checkbox', id: 'shareMyInfo' }),\n          $('<span>', { html: _msg('preference-analysis-shareMyInfo') })\n        ),\n        $($progress).attr('id', 'analysis-loading').css({\n          width: '96%',\n          position: 'absolute',\n          top: '50%',\n          transform: 'translateY(-50%)',\n        })\n      )\n    ),\n    $('<section>', { id: 'another' }).append(\n      $('<h3>', { text: _msg('preference-another-title') }),\n      $button({ type: 'secondary', text: _msg('beforeInstall-title') })\n        .css({ display: 'block' })\n        .click(function () {\n          beforeInstall(true).then(opt => {\n            set(opt)\n          })\n        }),\n      $('<h4>', { text: _msg('preference-display-label') }),\n      $('<label>').append(\n        $('<input>', { type: 'checkbox', id: 'redLinkQuickEdit' }),\n        $('<span>', { text: _msg('preference-redLinkQuickEdit') })\n      ),\n      $('<div>').append(\n        $('<h4>', { text: 'Custom skin (Not available yet)' }),\n        $('<label>', { class: 'choose-skin' }).append(\n          $('<input>', {\n            type: 'checkbox',\n            id: 'useCustomSkin',\n            disabled: true,\n          }),\n          $('<span>'),\n          $('<input>', {\n            id: 'skinUrl',\n            disabled: true,\n            style: 'width: calc(96% - 30px)',\n            value: _dir + '/src/skin/ipe-default.css',\n          })\n        )\n      ),\n      $('<h4>', { text: _msg('preference-savelocal-popup-title') }),\n      $('<button>', {\n        class: 'btn btn-secondary',\n        id: 'ipeSaveLocalShow',\n        text: _msg('preference-savelocal-btn'),\n      }).click(function () {\n        // 永久保存（本地用户页）\n        var $saveLocalModal = $('<section>').append(\n          _msg('preference-savelocal-popup'),\n          $br,\n          $('<textarea>', {\n            style: 'font-size: 12px; resize: none; width: 100%; height: 10em;',\n            readonly: true,\n          })\n            .click(function () {\n              this.select()\n            })\n            .val(\n              '/** InPageEdit Preferences **/\\n' +\n                'window.InPageEdit = window.InPageEdit || {}; // Keep this line\\n' +\n                'InPageEdit.myPreference = ' +\n                JSON.stringify($modalContent.data(), null, 2)\n            )\n        )\n        ssi_modal.dialog({\n          className: 'in-page-edit',\n          center: true,\n          title: _msg('preference-savelocal-popup-title'),\n          content: $saveLocalModal,\n          okBtn: {\n            className: 'btn btn-primary btn-single',\n            label: _msg('ok'),\n          },\n        })\n      })\n    ),\n    $('<section>', { id: 'about' }).append(\n      $('<h3>', { text: _msg('preference-about-label') }),\n      $('<div>', { style: 'font-size: 12px; font-style: italic;' }).html(\n        function () {\n          var isCanary = /(alpha|beta|pre)/i.test(version)\n          var html = 'v' + version\n          html += isCanary\n            ? ' - You are running the Canary version of InPageEdit<br>' +\n              _msg('version-notice-canary')\n            : ''\n          return html\n        }\n      ),\n      $('<button>', {\n        class: 'btn btn-secondary btn-single',\n        onclick: 'InPageEdit.about()',\n        text: _msg('preference-aboutAndHelp'),\n      }),\n      $('<button>', {\n        class: 'btn btn-secondary btn-single',\n        style: 'margin-top: .5em;',\n        onclick: 'InPageEdit.versionInfo()',\n        text: _msg('preference-updatelog'),\n      }),\n      $('<a>', {\n        href: 'https://ipe.miraheze.org/wiki/',\n        target: '_blank',\n        style: 'margin-top: .5em; display: block;',\n      }).append(\n        $('<button>', {\n          class: 'btn btn-secondary btn-single',\n          text: _msg('preference-translate'),\n        })\n      ),\n      $('<a>', {\n        href: 'https://discord.gg/VUVAh8w',\n        target: '_blank',\n        style: 'margin-top: .5em; display: block;',\n      }).append(\n        $('<button>', {\n          class: 'btn btn-secondary btn-single',\n          text: _msg('preference-discord'),\n        })\n      ),\n      $hr,\n      $('<p>', {\n        text:\n          'InPageEdit is a useful MediaWiki JavaScript Plugin written with jQuery',\n      }),\n      $('<p>').append(\n        '© InPageEdit Copyright (C)',\n        ' 2019 - ' + new Date().getFullYear(),\n        ' Wjghj Project (机智的小鱼君), ',\n        $('<a>', {\n          href: 'https://www.gnu.org/licenses/gpl-3.0-standalone.html',\n          text: 'GNU General Public License 3.0',\n        })\n      )\n    )\n  )\n\n  var $modalContent = $('<div>', { class: 'preference-tabber' }).append(\n    $tabList,\n    $tabContent\n  )\n\n  // 绑定tab-list按钮事件\n  $tabList.find('a').click(function (e) {\n    e.preventDefault()\n    var $this = $(this)\n    var tab = $this.attr('href')\n    if (tab) {\n      $tabList.find('a').removeClass('active')\n      $tabContent.find('section').removeClass('active')\n      $this.addClass('active')\n      $tabContent.find('' + tab).addClass('active')\n    }\n  })\n\n  // 设定input状态\n  // ...\n\n  // 绑定input事件\n  $tabContent.find('input').change(function () {\n    var $this = $(this)\n    var key = $this.attr('id')\n    var val\n    if ($this.prop('type') === 'checkbox') {\n      val = $this.prop('checked')\n    } else {\n      val = $this.val()\n    }\n    $modalContent.data(key, val)\n    console.log('[InPageEdit] Preset preference', $modalContent.data())\n  })\n\n  // 预先选中第一个tab\n  $tabList.find('a:first').addClass('active')\n  $tabContent.find('section:first').addClass('active')\n\n  // 显示模态框\n  ssi_modal.show({\n    sizeClass: 'dialog',\n    className: 'in-page-edit ipe-preference',\n    outSideClose: false,\n    title: _msg('preference-title') + ' - ' + version,\n    content: $modalContent,\n    buttons: [\n      {\n        label: _msg('preference-reset'),\n        className: 'btn btn-danger',\n        method: function (a, modal) {\n          ssi_modal.confirm(\n            {\n              title: _msg('preference-reset-confirm-title'),\n              content: _msg('preference-reset-confirm'),\n              className: 'in-page-edit',\n              center: true,\n              okBtn: {\n                label: _msg('ok'),\n                className: 'btn btn-danger',\n              },\n              cancelBtn: {\n                label: _msg('cancel'),\n                className: 'btn',\n              },\n            },\n            res => {\n              if (res) {\n                preference.set(defaultSettings)\n                modal.close()\n              } else {\n                return false\n              }\n            }\n          )\n        },\n      },\n      {\n        label: _msg('preference-save'),\n        className: 'btn btn-primary',\n        method: function (a, modal) {\n          preference.set($modalContent.data())\n          // console.info('[InPageEdit] Set preference', $modalContent.data())\n          modal.close()\n        },\n      },\n    ],\n    onShow($modal) {\n      var $modalWindow = $('#' + $modal.modalId)\n      mw.hook('InPageEdit.preference.modal').fire({\n        $modal,\n        $modalWindow,\n      })\n\n      // 如果在本地有设定存档，disable掉全部input\n      function setDisabled(obj, isArr) {\n        $.each(obj, (key, val) => {\n          if (typeof val === 'object') {\n            setDisabled(val, true)\n          } else if (isArr) {\n            // document.getElementById(val).disabled = true\n            $modalWindow.find(`[id=\"${val}\"]`).attr('disabled', true)\n          } else {\n            // document.getElementById(key).disabled = true\n            $modalWindow.find(`[id=\"${key}\"]`).attr('disabled', true)\n          }\n        })\n      }\n      if (typeof InPageEdit.myPreference !== 'undefined') {\n        // $modalWindow.find('.ssi-modalBtn.btn').attr({ disabled: true })\n        setDisabled(InPageEdit.myPreference)\n        $tabList.before(\n          $('<div>', {\n            class: 'has-local-warn',\n            style:\n              'padding-left: 8px; border-left: 6px solid orange; font-size: small;',\n            html: _msg('preference-savelocal-popup-haslocal'),\n          })\n        )\n      }\n\n      // 将现有设定反映到选项中\n      $.each(local, (key, val) => {\n        if (key === 'plugins') {\n          $modalContent.data(key, val)\n          return\n        }\n        var $input = $tabContent.find('#' + key)\n        if ($input.length > 0) {\n          $modalContent.data(key, val)\n          if (typeof val === 'string') {\n            $input.val(val)\n          }\n          if (typeof val === 'boolean') {\n            $input.prop('checked', val)\n          }\n        }\n      })\n\n      // 获取插件列表\n      var usedPlugin = preference.get('plugins')\n      var pluginCache = pluginStore.loadCache()\n      if (pluginCache) {\n        showPluginList(pluginCache)\n      } else {\n        pluginStore.get().then(list => {\n          pluginStore.saveCache(list)\n          showPluginList(list)\n        })\n      }\n      function showPluginList(list) {\n        $tabContent.find('#plugin-container').html($('<ul>'))\n        $.each(list, (key, val) => {\n          var name = val.name || 'Unknown'\n          var description = val.description || ''\n          var author = val.author\n            ? $('<a>', {\n                href: 'https://gtihub.com/' + val.author,\n                target: '_balnk',\n                text: '@' + val.author,\n              })\n            : '-'\n          $tabContent.find('#plugin-container > ul').append(\n            $('<li>').append(\n              $('<label>').append(\n                $('<input>', {\n                  class: 'plugin-checkbox',\n                  id: key,\n                  type: 'checkbox',\n                  checked: Boolean(\n                    usedPlugin.indexOf(key) >= 0 || val._force === true\n                  ), // 勾选当前正在使用以及强制启用的插件\n                  disabled:\n                    typeof InPageEdit.myPreference !== 'undefined' ||\n                    val._force === true, // 强制启用或者本地保存设定时禁止改变\n                }).change(function () {\n                  // 当插件选择框变化时，暂存设定档\n                  var $this = $(this)\n                  var checked = $this.prop('checked')\n                  var original = $modalContent.data('plugins')\n                  var index = original.indexOf(key)\n                  // 勾选且暂未启用\n                  if (checked && index < 0) {\n                    original.push(key)\n                  }\n                  // 取消勾选且已启用\n                  if (!checked && index >= 0) {\n                    original.splice(index, 1)\n                  }\n                  // 暂存\n                  $modalContent.data('plugins', original)\n                }),\n                $('<span>'), // checkbox框框\n                $('<div>', { class: 'plugin-name', text: name }),\n                $('<div>', { class: 'plugin-author', html: author }),\n                $('<div>', { class: 'plugin-description', text: description })\n              )\n            )\n          )\n        })\n      }\n\n      // 获取Analysis数据\n      var userName = config.wgUserName\n      $.get('https://api.wjghj.cn/inpageedit/query/wiki', {\n        url: config.wgServer + config.wgArticlePath.replace('$1', ''),\n        prop: 'users.' + userName + '._total|users.' + userName + '.functions',\n      }).then(ret => {\n        $tabContent.find('#analysis-container #analysis-loading').hide()\n        var data = ret.query[0].users[userName]\n        var total = data._total\n        var functionData = data.functions\n        var functionList = $('<table>', {\n          class: 'wikitable',\n          style: 'width: 96%',\n        }).append(\n          $('<tr>').append(\n            $('<th>', { text: 'ID' }),\n            $('<th>', { text: 'Times' }),\n            $('<th>', { text: 'Percents' })\n          )\n        )\n        $.each(functionData, (key, val) => {\n          functionList.append(\n            $('<tr>').append(\n              $('<th>', { text: key }),\n              $('<td>', { text: val }),\n              $('<td>', { text: ((val / total) * 100).toFixed(2) + '%' })\n            )\n          )\n        })\n        $tabContent.find('#analysis-container').append(\n          $('<h4>', {\n            text: config.wgUserName + ' - ' + config.wgSiteName,\n          }),\n          $('<p>').append(_msg('preference-analysis-totaluse', total)),\n          functionList\n        )\n      })\n    },\n  })\n}\n\nvar preference = {\n  default: defaultSettings,\n  defaultSettings,\n  set,\n  get,\n  modal,\n}\n\nmodule.exports = {\n  preference,\n}\n","const { _msg } = require('./_msg')\n\nconst { $progress } = require('./_elements.js')\n\n/**\n * @module progress 载入中模块\n * @param {Boolean|String} title\n * @default \"Loading...\"\n * @returns\n * - true: Mark top progress box as done\n * - false: Close top progress box\n * - String: Show new progress box with title\n */\nvar progress = function (title) {\n  if (title === true) {\n    $('.in-page-edit.loadingbox .ssi-modalTitle').html(_msg('done'))\n    $('.in-page-edit.loadingbox .ipe-progress').addClass('done')\n  } else if (title === false) {\n    if ($('.in-page-edit.loadingbox').length > 0) {\n      $('.in-page-edit.loadingbox').appendTo('body')\n      ssi_modal.close()\n    }\n  } else {\n    if ($('.in-page-edit.loadingbox').length > 0) return\n    if (typeof title === 'undefined') {\n      title = 'Loading...'\n    }\n    ssi_modal.show({\n      title: title,\n      content: $progress,\n      className: 'in-page-edit loadingbox',\n      center: true,\n      sizeClass: 'dialog',\n      closeIcon: false,\n      outSideClose: false,\n    })\n  }\n}\n\nmodule.exports = {\n  progress,\n}\n","var mwApi = new mw.Api()\nvar config = mw.config.get()\nconst { _analysis } = require('./_analysis')\nconst { _msg } = require('./_msg')\nconst { _hasRight } = require('./_hasRight')\nconst { $br } = require('./_elements')\n\n/**\n * @module quickDelete 删除页面模块\n * @param {String} page\n */\nvar quickDelete = function (page, givenReason = '') {\n  mw.hook('InPageEdit.quickDelete').fire()\n  console.log('Quick delete', page, givenReason)\n  var reason\n  page = page || config.wgPageName\n\n  ssi_modal.show({\n    outSideClose: false,\n    className: 'in-page-edit quick-delete',\n    center: true,\n    sizeClass: 'dialog',\n    title: _msg('delete-title'),\n    content: $('<div>').append(\n      $('<section>', { id: 'InPageEditDeletepage' }).append(\n        $('<span>', {\n          html: _msg('delete-reason', '<b>' + page.replace(/_/g, ' ') + '</b>'),\n        }),\n        $br,\n        $('<label>', { for: 'delete-reason', text: _msg('editSummary') }),\n        $('<input>', {\n          id: 'delete-reason',\n          style: 'width:96%',\n          onclick: \"$(this).css('box-shadow', '')\",\n          value: givenReason,\n        })\n      )\n    ),\n    beforeShow: function () {\n      if (!_hasRight('delete')) {\n        ssi_modal.dialog({\n          title: _msg('notify-no-right'),\n          content: _msg('delete-no-right'),\n          className: 'in-page-edit quick-deletepage',\n          center: true,\n          okBtn: {\n            className: 'btn btn-primary btn-single',\n          },\n        })\n        return false\n      }\n    },\n    buttons: [\n      {\n        label: _msg('cancel'),\n        className: 'btn btn-primary',\n        method: function (e, modal) {\n          modal.close()\n        },\n      },\n      {\n        label: _msg('confirm'),\n        className: 'btn btn-danger',\n        method: function (e, modal) {\n          reason = $('#InPageEditDeletepage #delete-reason').val()\n          if (reason === '') {\n            $('#InPageEditDeletepage #delete-reason').css(\n              'box-shadow',\n              '0 0 4px #f00'\n            )\n            return\n          }\n          _analysis('quick_delete')\n\n          ssi_modal.confirm(\n            {\n              center: true,\n              className: 'in-page-edit',\n              title: _msg('delete-confirm-title'),\n              content: _msg('delete-confirm-content'),\n              okBtn: {\n                label: _msg('confirm'),\n                className: 'btn btn-danger',\n              },\n              cancelBtn: {\n                label: _msg('cancel'),\n                className: 'btn',\n              },\n            },\n            function (result) {\n              if (result) {\n                reason = _msg('delete-title') + ' (' + reason + ')'\n                mwApi\n                  .postWithToken('csrf', {\n                    action: 'delete',\n                    title: page,\n                    reason: reason,\n                    format: 'json',\n                  })\n                  .then(() => {\n                    ssi_modal.notify('success', {\n                      className: 'in-page-edit',\n                      title: _msg('notify-success'),\n                      content: _msg('notify-delete-success', page),\n                    })\n                  })\n                  .fail(function (errorCode, feedback, errorThrown) {\n                    ssi_modal.notify('error', {\n                      className: 'in-page-edit',\n                      title: _msg('notify-error'),\n                      content:\n                        _msg('notify-delete-error') +\n                        ': <br/><span style=\"font-size:amall\">' +\n                        errorThrown.error['*'] +\n                        '(<code>' +\n                        errorThrown.error['code'] +\n                        '</code>)</span>',\n                    })\n                  })\n                modal.close()\n              } else {\n                return false\n              }\n            }\n          )\n        },\n      },\n    ],\n  })\n}\n\nmodule.exports = {\n  quickDelete,\n}\n","var mwApi = new mw.Api()\nvar config = mw.config.get()\n\nconst { _analysis } = require('./_analysis')\nconst { _msg } = require('./_msg')\n\nconst { $br, $progress } = require('./_elements')\n\n/**\n * @module quickDiff 快速页面差异模块\n * @param {Object} param standard MediaWiki API params\n */\nvar quickDiff = function (param) {\n  mw.hook('InPageEdit.quickDiff').fire()\n  _analysis('quick_diff')\n  if ($('[href*=\"mediawiki.diff.styles\"]').length < 1) {\n    mw.loader.load(\n      mw.util.wikiScript('load') +\n        '?modules=mediawiki.legacy.shared|mediawiki.diff.styles&only=styles',\n      'text/css'\n    )\n  }\n  var $modalTitle, $diffArea, $loading\n  if ($('.quick-diff').length > 0) {\n    console.info('[InPageEdit] Quick diff 正在加载新内容')\n    $modalTitle = $('.quick-diff .pageName')\n    $diffArea = $('.quick-diff .diffArea')\n    $loading = $('.quick-diff .ipe-progress')\n    $modalTitle.text(_msg('diff-loading'))\n    $diffArea.hide()\n    $('.quick-diff').appendTo('body')\n  } else {\n    $modalTitle = $('<span>', { class: 'pageName', text: _msg('diff-loading') })\n    $diffArea = $('<div>', { class: 'diffArea', style: 'display: none' })\n    $loading = $($progress)\n\n    ssi_modal.show({\n      className: 'in-page-edit quick-diff',\n      sizeClass: 'large',\n      fixedHeight: true,\n      fitScreen: true,\n      title: $modalTitle,\n      content: $('<div>').append($loading, $diffArea),\n      buttons: [\n        {\n          label: _msg('diff-button-todiffpage'),\n          className: 'btn btn-secondary toDiffPage',\n        },\n      ],\n    })\n  }\n  $loading\n    .show()\n    .css('margin-top', $('.quick-diff .ssi-modalContent').height() / 2)\n  $('.quick-diff .toDiffPage').unbind()\n  param.action = 'compare'\n  param.prop = 'diff|diffsize|rel|ids|title|user|comment|parsedcomment|size'\n  param.format = 'json'\n  if (param.totext) {\n    param.topst = true\n  } else if (param.fromtext) {\n    param.frompst = true\n  }\n  mwApi\n    .post(param)\n    .done(function (data) {\n      var diffTable = data.compare['*']\n      var toTitle\n      $loading.hide()\n      if (param.pageName === undefined) {\n        toTitle = data.compare.totitle\n      } else {\n        toTitle = param.pageName\n      }\n      function userLink(user) {\n        return (\n          '<a class=\"diff-user\" href=\"' +\n          mw.util.getUrl('User:' + user) +\n          '\">' +\n          user +\n          '</a> (<a href=\"' +\n          mw.util.getUrl('User_talk:' + user) +\n          '\">' +\n          _msg('diff-usertalk') +\n          '</a> | <a href=\"' +\n          mw.util.getUrl('Special:Contributions/' + user) +\n          '\">' +\n          _msg('diff-usercontrib') +\n          '</a> | <a href=\"' +\n          mw.util.getUrl('Special:Block/' + user) +\n          '\">' +\n          _msg('diff-userblock') +\n          '</a>)'\n        )\n      }\n      $modalTitle.html(_msg('diff-title') + ': <u>' + toTitle + '</u>')\n      $diffArea\n        .show()\n        .html('')\n        .append(\n          $('<table>', { class: 'diff difftable' }).append(\n            $('<colgroup>').append(\n              $('<col>', { class: 'diff-marker' }),\n              $('<col>', { class: 'diff-content' }),\n              $('<col>', { class: 'diff-marker' }),\n              $('<col>', { class: 'diff-content' })\n            ),\n            $('<tbody>').append(\n              $('<tr>').append(\n                $('<td>', { colspan: 2, class: 'diff-otitle' }).append(\n                  $('<a>', {\n                    href: config.wgScript + '?oldid=' + data.compare.fromrevid,\n                    text: data.compare.fromtitle,\n                  }),\n                  ' (',\n                  $('<span>', {\n                    class: 'diff-version',\n                    text: _msg('diff-version') + data.compare.fromrevid,\n                  }),\n                  ') (',\n                  $('<a>', {\n                    class: 'editLink',\n                    href:\n                      config.wgScript +\n                      '?action=edit&title=' +\n                      data.compare.fromtitle +\n                      '&oldid=' +\n                      data.compare.fromrevid,\n                    text: _msg('diff-edit'),\n                  }),\n                  ')',\n                  $br,\n                  userLink(data.compare.fromuser),\n                  $br,\n                  ' (',\n                  $('<span>', {\n                    class: 'diff-comment',\n                    html: data.compare.fromparsedcomment,\n                  }),\n                  ') ',\n                  $br,\n                  $('<a>', {\n                    class: 'prevVersion ipe-analysis-quick_diff_modalclick',\n                    href: 'javascript:void(0);',\n                    text: '←' + _msg('diff-prev'),\n                  }).click(() => {\n                    quickDiff({\n                      fromrev: data.compare.fromrevid,\n                      torelative: 'prev',\n                    })\n                  })\n                ),\n                $('<td>', { colspan: 2, class: 'diff-ntitle' }).append(\n                  $('<a>', {\n                    href: config.wgScript + '?oldid=' + data.compare.torevid,\n                    text: data.compare.totitle,\n                  }),\n                  ' (',\n                  $('<span>', {\n                    class: 'diff-version',\n                    text: _msg('diff-version') + data.compare.torevid,\n                  }),\n                  ') (',\n                  $('<a>', {\n                    class: 'editLink',\n                    href:\n                      config.wgScript +\n                      '?action=edit&title=' +\n                      data.compare.totitle +\n                      '&oldid=' +\n                      data.compare.torevid,\n                    text: _msg('diff-edit'),\n                  }),\n                  ')',\n                  $br,\n                  userLink(data.compare.touser),\n                  $br,\n                  ' (',\n                  $('<span>', {\n                    class: 'diff-comment',\n                    html: data.compare.toparsedcomment,\n                  }),\n                  ') ',\n                  $br,\n                  $('<a>', {\n                    class: 'nextVersion ipe-analysis-quick_diff_modalclick',\n                    href: 'javascript:void(0);',\n                    text: _msg('diff-nextv') + '→',\n                  }).click(() => {\n                    _analysis('quick_diff_modalclick')\n                    quickDiff({\n                      fromrev: data.compare.torevid,\n                      torelative: 'next',\n                    })\n                  })\n                )\n              ),\n              diffTable,\n              $('<tr>', {\n                class: 'diffSize',\n                style: 'text-align: center',\n              }).append(\n                $('<td>', {\n                  colspan: '2',\n                  text: data.compare.fromsize + _msg('diff-bytes'),\n                }),\n                $('<td>', {\n                  colspan: '2',\n                  text: data.compare.tosize + _msg('diff-bytes'),\n                })\n              )\n            )\n          )\n        )\n      $('.quick-diff button.toDiffPage').click(function () {\n        location.href =\n          config.wgScript +\n          '?oldid=' +\n          data.compare.fromrevid +\n          '&diff=' +\n          data.compare.torevid\n      })\n      require('./articleLink').articleLink($('.quick-diff .editLink'))\n      if (param.isPreview === true) {\n        $('.quick-diff button.toDiffPage').hide()\n        $diffArea\n          .find('.diff-otitle')\n          .html('<b>' + _msg('diff-title-original-content') + '</b>')\n        $diffArea\n          .find('.diff-ntitle')\n          .html('<b>' + _msg('diff-title-your-content') + '</b>')\n      }\n      if (\n        data.compare.fromsize === undefined ||\n        data.compare.tosize === undefined\n      ) {\n        $diffArea.find('.diffSize').hide()\n      }\n      // 无上一版本或下一版本\n      if (data.compare.fromrevid === undefined && param.isPreview !== true) {\n        $diffArea\n          .find('.diff-otitle')\n          .html(\n            '<span class=\"noPrevVerson\">' +\n              data.warnings.compare['*'] +\n              '</span>'\n          )\n      } else if (\n        data.compare.torevid === undefined &&\n        param.isPreview !== true\n      ) {\n        $diffArea\n          .find('.diff-ntitle')\n          .html(\n            '<span class=\"noNextVerson\">' +\n              data.warnings.compare['*'] +\n              '</span>'\n          )\n      }\n      // GitHub@issue#5 修复被隐藏版本的问题\n      if (data.compare.fromtexthidden !== undefined) {\n        $diffArea\n          .find('.diff-otitle .diff-version')\n          .addClass('diff-hidden-history')\n      }\n      if (data.compare.totexthidden !== undefined) {\n        $diffArea\n          .find('.diff-ntitle .diff-version')\n          .addClass('diff-hidden-history')\n      }\n      if (data.compare.fromuserhidden !== undefined) {\n        $diffArea\n          .find('.diff-otitle .diff-user')\n          .addClass('diff-hidden-history')\n      }\n      if (data.compare.touserhidden !== undefined) {\n        $diffArea\n          .find('.diff-ntitle .diff-user')\n          .addClass('diff-hidden-history')\n      }\n      if (data.compare.fromcommenthidden !== undefined) {\n        $diffArea.find('.diff-comment').addClass('diff-hidden-history')\n      }\n      if (data.compare.tocommenthidden !== undefined) {\n        $diffArea\n          .find('.diff-ntitle .diff-comment')\n          .addClass('diff-hidden-history')\n      }\n      if (data.error) {\n        console.warn('[InPageEdit] 快速差异获取时系统告知出现问题')\n        $diffArea.html(\n          _msg('diff-error') +\n            ': ' +\n            data.error.info +\n            '(<code>' +\n            data.error.code +\n            '</code>)'\n        )\n      }\n    })\n    .fail(function (errorCode, errorThrown) {\n      console.warn('[InPageEdit] 快速差异获取失败')\n      $loading.hide()\n      if (\n        errorThrown.error &&\n        errorThrown.error.info &&\n        errorThrown.error.code\n      ) {\n        $diffArea\n          .show()\n          .html(\n            _msg('diff-error') +\n              ': ' +\n              errorThrown.error.info +\n              '(<code>' +\n              errorThrown.error.code +\n              '</code>)'\n          )\n      } else {\n        $diffArea.show().html(_msg('diff-error'))\n      }\n    })\n}\n\nmodule.exports = {\n  quickDiff,\n}\n","var mwApi = new mw.Api()\nvar config = mw.config.get()\n\nconst { _analysis } = require('./_analysis')\nconst { _msg } = require('./_msg')\nconst { _hasRight } = require('./_hasRight')\n\nconst { $br, $progress } = require('./_elements')\n\nconst { findAndReplace } = require('./findAndReplace')\nconst { preference } = require('./preference')\nconst { progress } = require('./progress')\nconst { quickPreview } = require('./quickPreview')\nconst { quickDiff } = require('./quickDiff')\n\n/**\n * @module quickEdit 快速编辑模块\n *\n * @param {Object} options\n * @param {String} options.page edit page (default: wgPageName)\n * @param {Number} options.revision page rev ID\n * @param {Number} options.section edit section\n * @param {Boolean} options.reload if reload page after save successful (default: true)\n */\nvar quickEdit = function (options) {\n  /** 获取设定信息，设置缺省值 **/\n  options = options || {}\n  if (typeof options === 'string') {\n    options = {\n      page: options || config.wgPageName,\n    }\n  }\n  var defaultOptions = {\n    page: config.wgPageName,\n    pageId: -1,\n    revision: null,\n    summaryRevision: '',\n    section: null,\n    editText: '',\n    editMinor: false,\n    editSummary: _msg('preference-summary-default'),\n    editNotice: '',\n    outSideClose: true,\n    jsonGet: {\n      action: 'parse',\n      page: options.page || config.wgPageName,\n      prop: 'wikitext|langlinks|categories|templates|images|sections',\n      format: 'json',\n    },\n    jsonPost: {},\n    pageDetail: {},\n    jumpTo: '',\n    reload: true,\n  }\n\n  /** 获取用户设置 **/\n  var userPreference = preference.get()\n\n  /** 缓存时间戳 **/\n  var date = new Date(),\n    timestamp = date.getTime(),\n    now = date.toUTCString()\n\n  /** 将选项合并并标准化 **/\n  options = $.extend({}, defaultOptions, options, userPreference)\n  options.page = decodeURI(options.page) // 解码网址 Unicode\n\n  _analysis('quick_edit')\n\n  if (options.revision && options.revision !== config.wgCurRevisionId) {\n    ssi_modal.notify('warning', {\n      className: 'in-page-edit',\n      content: _msg('notify-editing-history'),\n      title: _msg('notify-info'),\n    })\n    delete options.jsonGet.page\n    options.jsonGet.oldid = options.revision\n    options.summaryRevision =\n      '(' +\n      _msg('editor-summary-rivision') +\n      '[[Special:Diff/' +\n      options.revision +\n      ']])'\n  }\n  if (options.section) {\n    options.jsonGet.section = options.section\n  }\n\n  // 模态框内部\n  var $modalTitle = $('<span>').append(\n    _msg('editor-title-editing') +\n      ': <u class=\"editPage\">' +\n      options.page.replace(/_/g, ' ') +\n      '</u>'\n  )\n  var $editTools = $('<div>', { class: 'editTools' }).append(\n    $('<div>', { class: 'btnGroup' }).append(\n      $('<div>', { class: 'toolSelect' }).append(\n        $('<div>', { class: 'label', text: _msg('editor-edittool-header') }),\n        $('<ul>', { class: 'ul-list' }).append(\n          $('<li>', {\n            class: 'editToolBtn',\n            'data-open': '\\n== ',\n            'data-middle': _msg('editor-edittool-header-text'),\n            'data-close': ' ==\\n',\n            text: 'H2',\n          }),\n          $('<li>', {\n            class: 'editToolBtn',\n            'data-open': '\\n=== ',\n            'data-middle': _msg('editor-edittool-header-text'),\n            'data-close': ' ===\\n',\n            text: 'H3',\n          }),\n          $('<li>', {\n            class: 'editToolBtn',\n            'data-open': '\\n==== ',\n            'data-middle': _msg('editor-edittool-header-text'),\n            'data-close': ' ====\\n',\n            text: 'H4',\n          }),\n          $('<li>', {\n            class: 'editToolBtn',\n            'data-open': '\\n===== ',\n            'data-middle': _msg('editor-edittool-header-text'),\n            'data-close': ' =====\\n',\n            text: 'H5',\n          })\n        )\n      )\n    ),\n    $('<div>', { class: 'btnGroup' }).append(\n      $('<span>', { class: 'label', text: '格式' }),\n      $('<button>', {\n        class: 'editToolBtn fa fa-bold btn',\n        'data-open': \"'''\",\n        'data-middle': _msg('editor-edittool-bold'),\n        'data-close': \"'''\",\n      }),\n      $('<button>', {\n        class: 'editToolBtn fa fa-italic btn',\n        'data-open': \"''\",\n        'data-middle': _msg('editor-edittool-italic'),\n        'data-close': \"''\",\n      }),\n      $('<button>', {\n        class: 'editToolBtn fa fa-list-ul btn',\n        'data-open': '\\n* ',\n        'data-middle': _msg('editor-edittool-list-bulleted'),\n        'data-close': '\\n',\n      }),\n      $('<button>', {\n        class: 'editToolBtn fa fa-list-ol btn',\n        'data-open': '\\n# ',\n        'data-middle': _msg('editor-edittool-list-numbered'),\n        'data-close': '\\n',\n      }),\n      $('<button>', {\n        class: 'editToolBtn fa fa-won btn',\n        'data-open': '<' + 'nowiki>',\n        'data-middle': _msg('editor-edittool-nowiki'),\n        'data-close': '</nowiki>',\n      }),\n      $('<button>', {\n        class: 'editToolBtn fa fa-level-down fa-rotate-90 btn',\n        'data-open': '<br>\\n',\n        'data-middle': '',\n        'data-close': '',\n      })\n    ),\n    $('<div>', { class: 'btnGroup' }).append(\n      $('<span>', { class: 'label', text: '插入' }),\n      $('<button>', {\n        class: 'editToolBtn fa fa-link btn',\n        'data-open': '[' + '[',\n        'data-middle': _msg('editor-edittool-internal-link'),\n        'data-close': ']]',\n      }),\n      $('<button>', {\n        class: 'editToolBtn fa fa-file-image-o btn',\n        'data-open': '[' + '[File:',\n        'data-middle': 'Example.png',\n        'data-close': '|thumb]]',\n      }),\n      $('<button>', {\n        class: 'editToolBtn btn',\n        'data-open': '\\n<' + 'gallery>\\n',\n        'data-middle': 'Example1.jpg|Description\\nExample2.png|Description',\n        'data-close': '\\n</gallery>\\n',\n        html:\n          '<span class=\"fa-stack\"><i class=\"fa fa-picture-o fa-stack-1x\"></i><i class=\"fa fa-picture-o fa-stack-1x\" style=\"left: 2px;top: 2px;text-shadow: 1px 1px 0 #fff;\"></i></span>',\n      })\n    ),\n    $('<div>', { class: 'btnGroup extra', style: 'display: none' }).append(\n      $('<span>', { class: 'label', text: '自定义' })\n    ),\n    $('<div>', {\n      class: 'btnGroup special-tools',\n      style: 'float: right',\n    }).append(\n      $('<button>', { class: 'btn fa fa-search' }).click(function () {\n        findAndReplace($editArea)\n      })\n    )\n  )\n  var $editArea = $('<textarea>', {\n    class: 'editArea',\n    style: 'margin-top: 0;',\n  })\n  var $optionsLabel = $('<div>', {\n    class: 'editOptionsLabel hideBeforeLoaded',\n  }).append(\n    $('<aside>', { class: 'detailArea' }).append(\n      $('<label>', {\n        class: 'detailToggle',\n        text: _msg('editor-detail-button-toggle'),\n      }),\n      $('<div>', { class: 'detailBtnGroup' }).append(\n        $('<a>', {\n          href: 'javascript:;',\n          class: 'detailBtn',\n          id: 'showTemplates',\n          text: _msg('editor-detail-button-templates'),\n        }),\n        ' | ',\n        $('<a>', {\n          href: 'javascript:;',\n          class: 'detailBtn',\n          id: 'showImages',\n          text: _msg('editor-detail-button-images'),\n        })\n      )\n    ),\n    // 摘要&小编辑\n    $('<label>', { for: 'editSummary', text: _msg('editSummary') }),\n    $br,\n    $('<input>', {\n      class: 'editSummary',\n      id: 'editSummary',\n      placeholder: 'Edit via InPageEdit~',\n      value: options.editSummary.replace(/\\$oldid/gi, options.summaryRevision),\n    }),\n    $br,\n    $('<label>').append(\n      $('<input>', {\n        type: 'checkbox',\n        class: 'editMinor',\n        id: 'editMinor',\n        checked: options.editMinor,\n      }),\n      $('<span>', { text: _msg('markAsMinor') })\n    ),\n    $br,\n    $('<label>').append(\n      $('<input>', {\n        type: 'checkbox',\n        class: 'reloadPage',\n        id: 'reloadPage',\n        checked: options.reload,\n      }),\n      $('<span>', { text: _msg('editor-reload-page') })\n    )\n  )\n  var $modalContent = $('<div>').append(\n    $progress,\n    $('<section>', { class: 'hideBeforeLoaded' }).append(\n      // 编辑工具条\n      $editTools,\n      // 编辑框\n      $editArea\n    )\n  )\n\n  // Debug\n  console.time('[InPageEdit] 获取页面源代码')\n  console.info('[InPageEdit] QuickEdit start with options:')\n  console.table(options)\n\n  // 显示主窗口\n  ssi_modal.show({\n    title: $modalTitle,\n    content: $modalContent,\n    outSideClose: options.outSideClose,\n    className: 'in-page-edit ipe-editor timestamp-' + timestamp,\n    sizeClass: 'large',\n\n    /* 按钮 */\n    buttons: [\n      {\n        side: 'left',\n        label: _msg('editor-button-save'),\n        className: 'btn btn-primary leftBtn hideBeforeLoaded save-btn',\n        method(e, modal) {\n          ssi_modal.confirm(\n            {\n              className: 'in-page-edit',\n              center: true,\n              content: _msg('editor-confirm-save'),\n              okBtn: {\n                className: 'btn btn-primary',\n                label: _msg('confirm'),\n              },\n              cancelBtn: {\n                className: 'btn btn-secondary',\n                label: _msg('cancel'),\n              },\n            },\n            function (result) {\n              if (result) {\n                var text = $editArea.val(),\n                  minor = $optionsLabel.find('.editMinor').prop('checked'),\n                  section = options.section,\n                  summary = $optionsLabel.find('.editSummary').val()\n                postArticle(\n                  {\n                    text: text,\n                    page: options.page,\n                    minor: minor,\n                    section: section,\n                    summary: summary,\n                  },\n                  modal\n                )\n              }\n            }\n          )\n        },\n      },\n      {\n        side: 'left',\n        label: _msg('editor-button-preview'),\n        className: 'btn btn-secondary leftBtn hideBeforeLoaded',\n        method() {\n          _analysis('preview_edit')\n          var text = $editArea.val()\n          quickPreview({\n            title: options.page,\n            text: text,\n            pst: true,\n          })\n        },\n      },\n      {\n        side: 'left',\n        label: _msg('editor-button-diff'),\n        className: 'btn btn-secondary leftBtn hideBeforeLoaded diff-btn',\n      },\n      {\n        label: _msg('cancel'),\n        className: 'btn btn-danger',\n        method(e, modal) {\n          modal.close()\n        },\n      },\n    ],\n\n    /* 预加载 */\n    beforeShow($modal) {\n      var $modalWindow = $('#' + $modal.modalId)\n      // 设置样式\n      $modalWindow.find('.hideBeforeLoaded').hide()\n      $modalContent\n        .find('.ipe-progress')\n        .css('margin', Number($(window).height() / 3 - 50) + 'px 0')\n      $editArea.css('height', ($(window).height() / 3) * 2 - 100)\n      $modalWindow.find('.ssi-buttons').prepend($optionsLabel)\n      $modalWindow.find('.ssi-modalTitle').append(\n        $('<a>', {\n          class: 'showEditNotice',\n          href: 'javascript:void(0);',\n          html:\n            '<i class=\"fa fa-info-circle\"></i> ' +\n            _msg('editor-has-editNotice'),\n          style: 'display: none;',\n        }).click(function () {\n          ssi_modal.show({\n            className: 'in-page-edit',\n            center: true,\n            title: _msg('editor-title-editNotice'),\n            content:\n              '<section class=\"editNotice\">' +\n              $modalContent.data('editNotice') +\n              '</section>',\n          })\n        })\n      )\n\n      /** Edit-Tool 扩展 **/\n      function insertText(strings, obj) {\n        var textarea = obj || $editArea[0],\n          start = textarea.selectionStart,\n          stop = textarea.selectionEnd,\n          selectedText = textarea.value.slice(start, stop)\n        textarea.value =\n          textarea.value.slice(0, start) +\n          (strings.open || '') +\n          (selectedText || strings.middle || '') +\n          (strings.close || '') +\n          textarea.value.slice(stop)\n        var selectStart = start + (strings.open.length || 0)\n        textarea.setSelectionRange(\n          selectStart,\n          selectStart + (selectedText.length || strings.middle.length || 0)\n        )\n        textarea.focus()\n      }\n      // 添加按钮\n      function addBtn(open, middle, close, icon) {\n        open = open || ''\n        middle = middle || ''\n        close = close || ''\n        icon = 'fa-' + icon || 'fa-wrench'\n        $modalContent.find('.btnGroup.extra').append(\n          $('<button>', {\n            class: 'editToolBtn btn',\n            'data-open': open,\n            'data-middle': middle,\n            'data-close': close,\n            html: `<i class=\"fa ${icon}\"></i>`,\n          })\n        )\n      }\n      // 用户自定义按钮\n      if (InPageEdit.buttons) {\n        var btns = InPageEdit.buttons\n        $editTools.find('.btnGroup.extra').show()\n\n        for (var i = 0; i < btns.length; i++) {\n          var btn = btns[i]\n          addBtn(btn.open, btn.middle, btn.close, btn.text)\n        }\n      }\n      $editTools.find('.editToolBtn').click(function (e) {\n        e.preventDefault()\n        var $this = $(this),\n          $open = $this.attr('data-open') || '',\n          $middle = $this.attr('data-middle') || '',\n          $close = $this.attr('data-close') || ''\n        insertText(\n          {\n            open: $open,\n            middle: $middle,\n            close: $close,\n          },\n          $editArea[0]\n        )\n      })\n    },\n    /**\n     * @event onShow\n     * @description 模态框显示后\n     */\n    onShow($modal) {\n      var $modalWindow = $('#' + $modal.modalId)\n      mw.hook('InPageEdit.quickEdit').fire({\n        $modal,\n        $modalWindow,\n        $modalTitle,\n        $modalContent,\n        $editArea,\n        $editTools,\n        $optionsLabel,\n      })\n      // 绑定事件，在尝试离开页面时提示\n      $editArea.change(function () {\n        $(this).attr('data-modifiled', 'true')\n        $(window).bind('beforeunload', function () {\n          return _msg('window-leave-confirm')\n        })\n      })\n      // 获取权限\n      if (!_hasRight('edit')) {\n        ssi_modal.notify('dialog', {\n          className: 'in-page-edit',\n          position: 'center bottom',\n          title: _msg('notify-no-right'),\n          content: _msg('editor-no-right'),\n          okBtn: {\n            label: _msg('ok'),\n            className: 'btn btn-primary',\n            method(e, modal) {\n              modal.close()\n            },\n          },\n        })\n        $modalWindow.find('.save-btn').addClass('btn-danger')\n      }\n\n      // 解析页面内容\n      mwApi\n        .get(options.jsonGet)\n        .done(function (data) {\n          console.timeEnd('[InPageEdit] 获取页面源代码')\n          contentDone(data)\n        })\n        .fail(function (a, b, errorThrown) {\n          console.timeEnd('[InPageEdit] 获取页面源代码')\n          console.warn('[InPageEdit]警告：无法获取页面内容')\n          var data = errorThrown\n          contentDone(data)\n        })\n\n      // 页面内容获取完毕，后续工作\n      function contentDone(data) {\n        options.pageDetail = data\n\n        if (data.error) {\n          console.warn('[InPageEdit]警告：无法获取页面内容')\n          options.editText = '<!-- ' + data.error.info + ' -->'\n          options.pageId = -1\n          $optionsLabel.find('.detailArea').hide()\n        } else {\n          options.editText = data.parse.wikitext['*']\n          options.pageId = data.parse.pageid\n        }\n        // 设定一堆子样式\n        $modalContent.find('.ipe-progress').hide()\n        $modalWindow.find('.hideBeforeLoaded').fadeIn(500)\n        $editArea.val(options.editText + '\\n')\n\n        var summaryVal\n        if (options.section !== null) {\n          summaryVal = $optionsLabel.find('.editSummary').val()\n          summaryVal = summaryVal.replace(\n            /\\$section/gi,\n            '/* ' + data.parse.sections[0].line + ' */'\n          )\n          $optionsLabel.find('.editSummary').val(summaryVal)\n          $modalTitle\n            .find('.editPage')\n            .after(\n              '<span class=\"editSection\">→' +\n                data.parse.sections[0].line +\n                '</span>'\n            )\n          options.jumpTo = '#' + data.parse.sections[0].anchor\n        } else {\n          summaryVal = $optionsLabel.find('.editSummary').val()\n          summaryVal = summaryVal.replace(/\\$section/gi, '')\n          $optionsLabel.find('.editSummary').val(summaryVal)\n          options.jumpTo = ''\n        }\n        if (\n          options.revision !== null &&\n          options.revision !== '' &&\n          options.revision !== config.wgCurRevisionId\n        ) {\n          $modalTitle\n            .find('.editPage')\n            .after(\n              '<span class=\"editRevision\">(' +\n                _msg('editor-title-editRevision') +\n                '：' +\n                options.revision +\n                ')</span>'\n            )\n          $modalWindow.find('.diff-btn').click(function () {\n            _analysis('quick_diff_edit')\n            var text = $editArea.val()\n            var diffJson = {\n              fromrev: options.revision,\n              totext: text,\n              hideBtn: true,\n              pageName: options.page,\n              isPreview: true,\n            }\n            if (options.section) {\n              diffJson.fromsection = options.section\n            }\n            quickDiff(diffJson)\n          })\n        } else {\n          $modalWindow.find('.diff-btn').attr('disabled', true)\n        }\n\n        // 获取页面基础信息\n        console.time('[InPageEdit] 获取页面基础信息')\n        var queryJson = {\n          action: 'query',\n          prop: 'revisions|info',\n          inprop: 'protection',\n          format: 'json',\n        }\n        if (options.pageId !== -1) {\n          queryJson.pageids = options.pageId\n        } else {\n          queryJson.titles = options.page\n        }\n        mwApi\n          .get(queryJson)\n          .done(function (data) {\n            console.info('[InPageEdit] 获取页面基础信息成功')\n            console.timeEnd('[InPageEdit] 获取页面基础信息')\n            // 记录页面最后编辑时间，防止编辑冲突\n            $modalContent.data(\n              'basetimestamp',\n              data['query']['pages'][options.pageId].revisions\n                ? data['query']['pages'][options.pageId]['revisions'][0][\n                    'timestamp'\n                  ]\n                : now\n            )\n            queryDone(data)\n          })\n          .fail(function (a, b, errorThrown) {\n            var data = errorThrown\n            console.timeEnd('[InPageEdit] 获取页面基础信息')\n            console.warn('[InPageEdit] 获取页面基础信息失败')\n            $modalContent.data('basetimestamp', now)\n            queryDone(data)\n          })\n\n        /** 页面保护等级和编辑提示等 **/\n        function queryDone(data) {\n          options.namespace = data.query.pages[options.pageId].ns // 名字空间ID\n          options.protection =\n            data.query.pages[options.pageId]['protection'] || [] // 保护等级\n          if (data.query.pages[options.pageId].revisions) {\n            options.revision =\n              data.query.pages[options.pageId]['revisions'][0]['revid'] // 版本号\n          }\n\n          // 使页面名标准化\n          options.page = data.query.pages[options.pageId].title\n          $modalTitle.find('.editPage').text(options.page)\n\n          if (options.revision) {\n            $modalWindow\n              .find('.diff-btn')\n              .attr('disabled', false)\n              .click(function () {\n                _analysis('quick_diff_edit')\n                var text = $editArea.val()\n                var diffJson = {\n                  fromrev: options.revision,\n                  totext: text,\n                  hideBtn: true,\n                  pageName: options.page,\n                  isPreview: true,\n                }\n                if (options.section) {\n                  diffJson.fromsection = options.section\n                }\n                quickDiff(diffJson)\n              })\n          }\n\n          // 页面是否被保护\n          if (options.protection.length > 0) {\n            for (var i = 0; i < options.protection.length; i++) {\n              if (options.protection[i].type === 'edit') {\n                if (\n                  (options.protection[i].level === 'autoconfirmed' &&\n                    !_hasRight('autoconfirmed')) ||\n                  (options.protection[i].level === 'sysop' &&\n                    !_hasRight('editprotected')) ||\n                  (config.wgNamespaceNumber === 8 &&\n                    !_hasRight('editinterface'))\n                ) {\n                  ssi_modal.notify('dialog', {\n                    className: 'in-page-edit',\n                    position: 'center bottom',\n                    title: _msg('notify-no-right'),\n                    content: _msg('editor-no-right'),\n                    okBtn: {\n                      label: _msg('ok'),\n                      className: 'btn btn-primary',\n                      method(e, modal) {\n                        modal.close()\n                      },\n                    },\n                  })\n                  $modalWindow.find('.save-btn').addClass('btn-danger')\n                }\n              }\n            }\n          }\n\n          // 获取编辑提示\n          var namespaceNoticePage = 'Editnotice-' + options.namespace,\n            pageNoticePage =\n              namespaceNoticePage +\n              '-' +\n              options.page\n                .replace(/_/g, ' ') // 将页面名里的 _ 转换为空格\n                .replace(\n                  config.wgFormattedNamespaces[options.namespace] + ':',\n                  ''\n                ) // 去掉名字空间\n\n          mwApi\n            .get({\n              action: 'query',\n              meta: 'allmessages',\n              ammessages: namespaceNoticePage + '|' + pageNoticePage,\n            })\n            .done(function (data) {\n              var wikitextNs = data.query.allmessages[0]['*'] || '',\n                wikitextPage = data.query.allmessages[1]['*'] || ''\n              if (wikitextNs === '' && wikitextPage === '') return // 没有编辑提示\n              // 将编辑提示解析为 html\n              mwApi\n                .post({\n                  action: 'parse',\n                  title: options.page,\n                  contentmodel: 'wikitext',\n                  preview: true,\n                  text: wikitextPage + '\\n' + wikitextNs,\n                })\n                .done(function (data) {\n                  options.editNotice = data.parse.text['*']\n                  var notice = $modalContent.data('editNotice') || ''\n                  notice += '\\n' + options.editNotice\n                  $modalContent.data('editNotice', notice)\n                  $modalContent.find('.showEditNotice').show()\n                })\n            })\n        }\n      }\n    },\n\n    /* 确认是否取消 */\n    beforeClose(modal) {\n      if ($editArea.attr('data-modifiled') !== 'true') {\n        close()\n        return\n      } else if ($editArea.attr('data-confirmclose') === 'true') {\n        closeNoReload()\n        return\n      }\n      ssi_modal.confirm(\n        {\n          className: 'in-page-edit',\n          center: true,\n          content: _msg('editor-leave-confirm'),\n          okBtn: {\n            className: 'btn btn-danger',\n            label: _msg('confirm'),\n          },\n          cancelBtn: {\n            className: 'btn btn-secondary',\n            label: _msg('cancel'),\n          },\n        },\n        function (result) {\n          if (result === true) {\n            close()\n          }\n        }\n      )\n      function close() {\n        $(window).unbind('beforeunload')\n        modal.options.keepContent = false\n        modal.options.beforeClose = ''\n        modal.close()\n        ssi_modal.notify('info', {\n          className: 'in-page-edit',\n          position: 'right top',\n          title: _msg('cancel'),\n          content: _msg('notify-no-change'),\n        })\n      }\n      function closeNoReload() {\n        $(window).unbind('beforeunload')\n        modal.options.keepContent = false\n        modal.options.beforeClose = ''\n        modal.close()\n      }\n      return false\n    },\n  })\n\n  // 页面详情模块\n  $optionsLabel.find('.detailBtnGroup .detailBtn').click(function () {\n    _analysis('quick_edit_pagedetail')\n    var $this = $(this),\n      id = $this.attr('id'),\n      content = $('<ul>')\n    switch (id) {\n      case 'showTemplates':\n        var templates = options.pageDetail.parse.templates,\n          templateName\n        for (let i = 0; i < templates.length; i++) {\n          templateName = templates[i]['*']\n          $('<li>')\n            .append(\n              $('<a>', {\n                href: mw.util.getUrl(templateName),\n                target: '_blank',\n                text: templateName,\n              }),\n              ' (',\n              $('<a>', {\n                href: 'javascript:;',\n                text: _msg('quick-edit'),\n                class: 'quickEditTemplate',\n                'data-template-name': templateName,\n              }),\n              ')'\n            )\n            .appendTo(content)\n        }\n        ssi_modal.show({\n          className: 'in-page-edit quick-edit-detail',\n          sizeClass: 'dialog',\n          title: _msg('editor-detail-title-templates'),\n          content: content,\n        })\n        break\n      case 'showImages':\n        var images = options.pageDetail.parse.images,\n          imageName\n        for (let i = 0; i < images.length; i++) {\n          imageName = images[i]\n          $('<li>')\n            .append(\n              $('<a>', {\n                href: mw.util.getUrl('File:' + imageName),\n                target: '_balnk',\n                text: imageName,\n              }),\n              ' (',\n              $('<a>', {\n                href: 'javascript:;',\n                class: 'quickViewImage',\n                text: _msg('editor-detail-images-quickview'),\n                'data-image-name': imageName,\n              }),\n              ' | ',\n              $('<a>', {\n                href:\n                  config.wgScript +\n                  '?title=Special:Upload&wpDestFile=' +\n                  imageName +\n                  '&wpForReUpload=1',\n                target: '_balnk',\n                text: _msg('editor-detail-images-upload'),\n              }),\n              ')'\n            )\n            .appendTo(content)\n        }\n        ssi_modal.show({\n          className: 'in-page-edit quick-edit-detail',\n          sizeClass: 'dialog',\n          title: _msg('editor-detail-title-images'),\n          content,\n        })\n        break\n    }\n    $('.in-page-edit.quick-edit-detail .quickEditTemplate').click(function () {\n      _analysis('quick_edit_pagedetail_edit_template')\n      var $this = $(this)\n      var page = $this.attr('data-template-name')\n      quickEdit({\n        page,\n      })\n    })\n    $('.in-page-edit.quick-edit-detail .quickViewImage').click(function () {\n      _analysis('quick_edit_pagedetail_view_image')\n      var $this = $(this)\n      var imageName = $this.attr('data-image-name')\n      ssi_modal.show({\n        className: 'in-page-edit quick-view-image',\n        center: true,\n        title: imageName.replace(/_/g, ' '),\n        content: $('<center>', { id: 'imageLayer' }).append($progress),\n        buttons: [\n          {\n            label: _msg('editor-detail-images-upload'),\n            className: 'btn btn-primary',\n            method() {\n              window.open(\n                config.wgScript +\n                  '?title=Special:Upload&wpDestFile=' +\n                  imageName +\n                  '&wpForReUpload=1'\n              )\n            },\n          },\n          {\n            label: _msg('close'),\n            className: 'btn btn-secondary',\n            method(a, modal) {\n              modal.close()\n            },\n          },\n        ],\n        onShow() {\n          mwApi\n            .get({\n              action: 'query',\n              format: 'json',\n              prop: 'imageinfo',\n              titles: 'File:' + imageName.replace(/file:/g, ''),\n              iiprop: 'url',\n            })\n            .done(function (data) {\n              $('.quick-view-image .ipe-progress').hide()\n              $('.quick-view-image #imageLayer').append(\n                $('<img>', {\n                  src: data.query.pages['-1'].imageinfo[0].url,\n                  class: 'loading',\n                  style: 'max-width: 80%; max-height: 60vh',\n                })\n              )\n              $('.quick-view-image #imageLayer img').load(function () {\n                $(this).removeClass('loading')\n              })\n            })\n        },\n      })\n    })\n  })\n\n  // 发布编辑模块\n  function postArticle({ text, page, minor, summary, section }, modal) {\n    _analysis('quick_edit_save')\n    progress(_msg('editor-title-saving'))\n    options.jsonPost = {\n      action: 'edit',\n      basetimestamp: $modalContent.data('basetimestamp'),\n      starttimestamp: now,\n      text,\n      title: page,\n      minor,\n      summary,\n      errorformat: 'plaintext',\n    }\n    if (section !== undefined && section !== '' && section !== null) {\n      options.jsonPost.section = section\n      delete options.jsonPost.basetimestamp\n    }\n\n    mwApi\n      .postWithToken('csrf', options.jsonPost)\n      .done(saveSuccess)\n      .fail(saveError)\n\n    // 保存正常\n    function saveSuccess(data, feedback, errorThrown) {\n      if (data.edit.result === 'Success') {\n        progress(true)\n        // 是否重载页面\n        if ($optionsLabel.find('.reloadPage').prop('checked')) {\n          var content\n          $(window).unbind('beforeunload')\n          content = _msg('notify-save-success')\n          setTimeout(function () {\n            if (page === config.wgPageName) {\n              window.location = mw.util.getUrl(page) + options.jumpTo\n              window.location.reload()\n            } else {\n              window.location.reload()\n            }\n          }, 500)\n        } else {\n          console.info('[InPageEdit] 将不会重载页面！')\n          content = _msg('notify-save-success-noreload')\n          setTimeout(function () {\n            progress(false)\n            $editArea.attr('data-confirmclose', 'true')\n            modal.close()\n          }, 1500)\n        }\n\n        ssi_modal.notify('success', {\n          className: 'in-page-edit',\n          position: 'right top',\n          title: _msg('notify-success'),\n          content,\n        })\n      } else {\n        saveError(data, feedback, errorThrown)\n      }\n    }\n\n    // 保存失败\n    function saveError(errorCode, feedback, errorThrown) {\n      progress(false)\n      var data = errorThrown || errorCode // 规范错误代码\n      var errorInfo,\n        errorMore = ''\n      if (data.errors !== undefined) {\n        errorCode = data.errors[0].code\n        errorInfo = data.errors[0]['*']\n        errorMore = ''\n      } else if (data.edit.result !== 'Success') {\n        errorCode = data.edit.code || 'Unknown'\n        errorInfo = data.edit.info || 'Reason unknown.'\n        errorMore = data.edit.warning || ''\n      } else {\n        errorCode = 'unknown'\n        errorInfo = 'Reason unknown.'\n        errorMore = 'Please contact plug-in author or try again.'\n      }\n      ssi_modal.show({\n        className: 'in-page-edit',\n        sizeClass: 'dialog',\n        center: true,\n        title: _msg('editor-save-error'),\n        content: errorInfo + '<hr style=\"clear: both\" />' + errorMore,\n      })\n      ssi_modal.notify('error', {\n        className: 'in-page-edit',\n        position: 'right top',\n        closeAfter: {\n          time: 15,\n        },\n        title: _msg('notify-error'),\n        content: _msg('editor-save-error') + '：<code>' + errorCode + '</code>',\n      })\n\n      console.error('[InPageEdit] Submit failed: \\nCode: ' + errorCode)\n      return\n    }\n  }\n}\n\nmodule.exports = {\n  quickEdit,\n}\n","const { _msg } = require('./_msg')\nconst { $progress } = require('./_elements')\n\nvar mwApi = new mw.Api()\n\n/**\n * @module quickPreview 快速预览文章页\n * @param params {Object}\n */\nvar quickPreview = function (params, modalSize = 'large', center = false) {\n  var defaultOptions = {\n    action: 'parse',\n    preview: true,\n    disableeditsection: true,\n    prop: 'text',\n    format: 'json',\n  }\n  var options = $.extend({}, defaultOptions, params)\n  mw.hook('InPageEdit.quickPreview').fire()\n  var timestamp = new Date().getTime()\n  console.time('[InPageEdit] Request preview')\n  ssi_modal.show({\n    sizeClass: new RegExp(\n      /dialog|small|smallToMedium|medium|mediumToLarge|large|full|auto/\n    ).test(modalSize)\n      ? modalSize\n      : 'large',\n    center: Boolean(center),\n    className: 'in-page-edit previewbox',\n    title: _msg('preview-title'),\n    content: $('<section>').append(\n      $progress,\n      $('<div>', {\n        class: 'InPageEditPreview',\n        'data-timestamp': timestamp,\n        style: 'display:none',\n        text: _msg('preview-placeholder'),\n      })\n    ),\n    fixedHeight: true,\n    fitScreen: true,\n    buttons: [{ label: '', className: 'hideThisBtn' }],\n    onShow() {\n      $('.previewbox .ipe-progress').css(\n        'margin-top',\n        $('.previewbox .ipe-progress').parent().height() / 2\n      )\n      $('.previewbox .hideThisBtn').hide()\n      mwApi\n        .post(options)\n        .then(function (data) {\n          console.timeEnd('[InPageEdit] Request preview')\n          var content = data.parse.text['*']\n          $('.previewbox .ipe-progress').hide(150)\n          $('.InPageEditPreview[data-timestamp=\"' + timestamp + '\"]')\n            .fadeIn(500)\n            .html(content)\n        })\n        .fail(function () {\n          console.timeEnd('[InPageEdit] Request preview')\n          console.warn('[InPageEdit] 预览失败')\n          $('.previewbox .ipe-progress').hide(150)\n          $('.InPageEditPreview[data-timestamp=\"' + timestamp + '\"]')\n            .fadeIn(500)\n            .html(_msg('preview-error'))\n        })\n    },\n  })\n}\n\nmodule.exports = {\n  quickPreview,\n}\n","var mwApi = new mw.Api()\nvar config = mw.config.get()\n\nconst { _analysis } = require('./_analysis')\nconst { _msg } = require('./_msg')\nconst { $br, $progress } = require('./_elements')\n\nconst { _resolveExists } = require('./_resolveExists')\nconst { preference } = require('./preference')\n\n/**\n * @module quickRedirect 快速重定向模块\n * @param {'from'|'to'} type\n */\nvar quickRedirect = function (type = 'to') {\n  mw.hook('InPageEdit.quickRedirect').fire()\n  var text = '#REDIRECT [[:$1]]',\n    question,\n    target,\n    json = {\n      action: 'edit',\n      createonly: 1,\n      minor: preference.get('editMinor'),\n      format: 'json',\n      errorformat: 'plaintext',\n    },\n    summary\n\n  if (type === 'to') {\n    json.title = config.wgPageName\n    question = _msg(\n      'redirect-question-to',\n      '<b>' + config.wgPageName.replace(/_/g, ' ') + '</b>'\n    )\n  } else if (type === 'from') {\n    question = _msg(\n      'redirect-question-from',\n      '<b>' + config.wgPageName.replace(/_/g, ' ') + '</b>'\n    )\n    summary = _msg('redirect-summary') + ' → [[:' + config.wgPageName + ']]'\n    json.text = text.replace('$1', config.wgPageName)\n  } else {\n    console.error('[InPageEdit] quickRedirect only accept \"from\" or \"to\"')\n    return\n  }\n\n  ssi_modal.show({\n    outSideClose: false,\n    className: 'in-page-edit quick-redirect',\n    center: true,\n    sizeClass: 'dialog',\n    title: _msg('redirect-title'),\n    content: $('<div>').append(\n      $('<section>').append(\n        $('<span>', { html: question }),\n        $br,\n        $('<input>', { id: 'redirect-page', style: 'width:96%' }).click(\n          function () {\n            $(this).css('box-shadow', '')\n          }\n        ),\n        $br,\n        $('<label>', { for: 'redirect-reason', text: _msg('editSummary') }),\n        $('<input>', { id: 'redirect-reason', style: 'width:96%' })\n      ),\n      $($progress).css('display', 'none')\n    ),\n    buttons: [\n      {\n        label: _msg('confirm'),\n        className: 'btn btn-primary btn-single okBtn',\n        method: function (a, modal) {\n          target = $('.in-page-edit.quick-redirect #redirect-page').val()\n          if (\n            target === '' ||\n            target.replace(/_/g, ' ') === config.wgPageName.replace(/_/g, ' ')\n          ) {\n            $('.in-page-edit.quick-redirect #redirect-page').css(\n              'box-shadow',\n              '0 0 4px #f00'\n            )\n            return\n          }\n\n          _analysis('quick_redirect')\n\n          if (type === 'to') {\n            summary = _msg('redirect-summary') + ' → [[:' + target + ']]'\n            json.text = text.replace('$1', target)\n          } else if (type === 'from') {\n            json.title = target\n          }\n          if ($('.in-page-edit.quick-redirect #redirect-reason').val() !== '') {\n            summary =\n              summary +\n              ' (' +\n              $('.in-page-edit.quick-redirect #redirect-reason').val() +\n              ')'\n          }\n          json.summary = summary\n\n          $('.in-page-edit.quick-redirect .ipe-progress').show()\n          $('.in-page-edit.quick-redirect section').hide()\n          $('.in-page-edit.quick-redirect .okBtn').attr('disabled', 'disabled')\n\n          mwApi.postWithToken('csrf', json).done(successed).fail(failed)\n          // 重定向成功\n          function successed(data) {\n            if (data.errors) {\n              failed(data.errors[0].code, data)\n              return\n            }\n            $('.in-page-edit.quick-redirect .ipe-progress').addClass('done')\n            ssi_modal.notify('success', {\n              className: 'in-page-edit',\n              content: _msg('notify-redirect-success'),\n              title: _msg('notify-success'),\n            })\n            if (type === 'to') {\n              window.location.reload()\n            } else {\n              $('.in-page-edit.quick-redirect .ipe-progress').addClass('done')\n              setTimeout(function () {\n                modal.close()\n              }, 2000)\n            }\n          }\n          // 重定向失败\n          function failed(errorCode, errorThrown) {\n            $('.in-page-edit.quick-redirect .ipe-progress').hide()\n            $('.in-page-edit.quick-redirect section').show()\n            $('.in-page-edit.quick-redirect .okBtn').attr('disabled', false)\n            $('.in-page-edit.quick-redirect .ipe-progress').addClass('done')\n            ssi_modal.notify('error', {\n              className: 'in-page-edit',\n              content:\n                _msg('notify-redirect-error') +\n                '<br>' +\n                errorThrown.errors[0]['*'] +\n                ' (<code>' +\n                errorCode +\n                '</code>)',\n              title: _msg('notify-error'),\n            })\n            // 如果是由于页面存在，给出解决方案\n            if (errorCode === 'articleexists') {\n              var fromPage, toPage\n              if (type === 'from') {\n                fromPage = target\n                toPage = config.wgPageName\n              } else if (type === 'to') {\n                fromPage = config.wgPageName\n                toPage = target\n              }\n              _resolveExists(fromPage, {\n                delete: 'Delete for redirect to [[' + toPage + ']]',\n                edit: 'Modify for redirect',\n              })\n            }\n          }\n        },\n      },\n    ],\n  })\n}\n\nmodule.exports = {\n  quickRedirect,\n}\n","var mwApi = new mw.Api()\nvar config = mw.config.get()\n\nconst { _analysis } = require('./_analysis')\nconst { _msg } = require('./_msg')\nconst { _hasRight } = require('./_hasRight')\nconst { _resolveExists } = require('./_resolveExists')\nconst { $br } = require('./_elements')\n\nconst { progress } = require('./progress')\n\n/**\n * @module quickRename 快速重命名模块\n * @param {String} from\n * @param {String} to\n */\nvar quickRename = function (from, to) {\n  mw.hook('InPageEdit.quickRename').fire()\n  from = from || config.wgPageName\n  to = to || ''\n  var reason, movetalk, movesubpages, noredirect\n\n  ssi_modal.show({\n    outSideClose: false,\n    className: 'in-page-edit quick-rename',\n    center: true,\n    sizeClass: 'dialog',\n    title: _msg('rename-title'),\n    content: $('<section>').append(\n      $('<label>', {\n        for: 'move-to',\n        html: _msg('rename-moveTo', '<b>' + from.replace(/_/g, ' ') + '</b>'),\n      }),\n      $br,\n      $('<input>', {\n        id: 'move-to',\n        style: 'width:96%',\n        onclick: \"$(this).css('box-shadow','')\",\n      }),\n      $br,\n      $('<label>', { for: 'move-reason', text: _msg('editSummary') }),\n      $br,\n      $('<input>', { id: 'move-reason', style: 'width:96%' }),\n      $br,\n      $('<label>').append(\n        $('<input>', { type: 'checkbox', id: 'movetalk', checked: 'checked' }),\n        $('<span>', { text: _msg('rename-movetalk') })\n      ),\n      $br,\n      $('<label>').append(\n        $('<input>', {\n          type: 'checkbox',\n          id: 'movesubpages',\n          checked: 'checked',\n        }),\n        $('<span>', { text: _msg('rename-movesubpages') })\n      ),\n      $br,\n\n      $('<label>').append(\n        $('<input>', { type: 'checkbox', id: 'noredirect' }),\n        $('<span>', { text: _msg('rename-noredirect') })\n      )\n    ),\n    buttons: [\n      {\n        label: _msg('cancel'),\n        className: 'btn btn-secondary',\n        method: function (a, modal) {\n          modal.close()\n        },\n      },\n      {\n        label: _msg('confirm'),\n        className: 'btn btn-primary',\n        method: function () {\n          to = $('.in-page-edit.quick-rename #move-to').val()\n          if (\n            to === '' ||\n            to === config.wgPageName ||\n            to === config.wgPageName.replace(/_/g, ' ')\n          ) {\n            $('.in-page-edit.quick-rename #move-to').css(\n              'box-shadow',\n              '0 0 4px #f00'\n            )\n            return\n          }\n\n          _analysis('quick_move')\n\n          progress(_msg('editor-title-saving'))\n          movetalk = $('.in-page-edit.quick-rename #movetalk').prop('checked')\n          movesubpages = $('.in-page-edit.quick-rename #movesubpages').prop(\n            'checked'\n          )\n          noredirect = $('.in-page-edit.quick-rename #noredirect').prop(\n            'checked'\n          )\n          reason = $('.in-page-edit.quick-rename #move-reason').val()\n\n          if (reason === '') {\n            reason = _msg('rename-summary') + ' → [[:' + to + ']]'\n          } else {\n            reason =\n              _msg('rename-summary') + ' → [[:' + to + ']] (' + reason + ')'\n          }\n          mwApi\n            .postWithToken('csrf', {\n              action: 'move',\n              from: from,\n              to: to,\n              reason: reason,\n              movetalk: movetalk,\n              movesubpages: movesubpages,\n              noredirect: noredirect,\n            })\n            .done(function () {\n              progress(true)\n              ssi_modal.notify('success', {\n                className: 'in-page-edit',\n                content: _msg('notify-rename-success'),\n                title: _msg('notify-success'),\n              })\n              location.href = config.wgArticlePath.replace('$1', to)\n            })\n            .fail(function (errorCode, feedback, errorThrown) {\n              progress(false)\n              ssi_modal.notify('error', {\n                className: 'in-page-edit',\n                content:\n                  _msg('notify-rename-error') +\n                  ': ' +\n                  errorThrown.error.info +\n                  '<code>' +\n                  errorThrown.error.code +\n                  '</code>',\n                title: _msg('notify-error'),\n              })\n              // 如果原因是页面已存在，给出解决方案\n              if (errorThrown.error.code === 'articleexists') {\n                _resolveExists(to, 'For move page [[' + from + ']] to here.')\n              }\n            })\n        },\n      },\n    ],\n    beforeShow: function () {\n      if (!_hasRight('move')) {\n        ssi_modal.dialog({\n          title: _msg('notify-no-right'),\n          content: _msg('rename-no-right'),\n          className: 'in-page-edit quick-deletepage',\n          center: true,\n          okBtn: {\n            className: 'btn btn-primary btn-single',\n          },\n        })\n        return false\n      }\n    },\n  })\n}\n\nmodule.exports = {\n  quickRename,\n}\n","const api = require('./api.json')\nconst { _msg } = require('./_msg')\n\nfunction getNotice(cb) {\n  return $.get(api.specialNotice).then(data => {\n    cb && cb(data)\n  })\n}\n\nfunction getLocal() {\n  var noticeList = localStorage.getItem('InPageEditNoticeId') || []\n  try {\n    noticeList = JSON.parse(noticeList)\n  } catch (e) {\n    localStorage.setItem('InPageEditNoticeId', '[]')\n    noticeList = []\n  }\n  return noticeList\n}\n\nfunction setLocal({ id }) {\n  var noticeList = localStorage.getItem('InPageEditNoticeId') || []\n  try {\n    noticeList = JSON.parse(noticeList)\n  } catch (e) {\n    noticeList = []\n  }\n  if (!id.includes(noticeList)) {\n    noticeList.push(id)\n  }\n  localStorage.setItem('InPageEditNoticeId', JSON.stringify(noticeList))\n  console.info('[InPageEdit] Notice save as viewed', id)\n}\n\nfunction isViewed({ id }) {\n  var noticeList = getLocal()\n  var viewed = id.includes(noticeList)\n  console.info('[InPageEdit] Notice with id: ' + id, viewed)\n  return viewed\n}\n\nfunction makeList({ id, level, title, message }) {\n  return $('<section>', { class: 'notice-list level-' + level, id }).append(\n    $('<h4>', { html: title }),\n    $('<div>', { html: message })\n  )\n}\n\n/**\n * @module specialNotice 特别通知\n */\nvar specialNotice = function () {\n  getNotice(data => {\n    var noticeContainer = $('<div>', { class: 'ipe-notice-container' }),\n      noticeList = []\n    $.each(data, (_, item) => {\n      if (!isViewed(item)) {\n        noticeList.push(makeList(item))\n      }\n    })\n\n    console.info('[InPageEdit] Notice list', noticeList)\n\n    // 没有未读消息\n    if (noticeList.length < 1) return\n\n    noticeContainer.append(noticeList)\n    ssi_modal.show({\n      className: 'in-page-edit ipe-special-notice',\n      sizeClass: 'dialog',\n      outSideClose: false,\n      center: true,\n      title: _msg('version-notice-title'),\n      content: noticeContainer,\n      buttons: [\n        {\n          label: _msg('updatelog-dismiss'),\n          className: 'btn btn-single',\n          method(e, modal) {\n            modal.close()\n            $.each(noticeList, (_, item) => {\n              setLocal(item)\n            })\n          },\n        },\n      ],\n    })\n  })\n}\n\nmodule.exports = {\n  specialNotice,\n  getNotice,\n}\n","/**\n * @module stepModal 分步走模态框\n *\n * @param {Object} params\n * @param {Array} params.contents Modal contents { title: String, content: String, method: Function }\n * @param {Number} params.step From step, 1 means first one\n * @param {String} params.btnBefore\n * @param {String} params.btnAfter\n * @param {String} param.btnDone\n * @param {Function} param.afterDone\n * @param {Function} param.onShow\n *\n * @return {Promise} After done\n * @return {Object} $modal Modal Obj\n *\n * @example stepModal([{\n *   title: 'step 1 title',\n *   content: 'step 1 content',\n *   method(modal) {}\n * }]).then(()=>console.log('done'))\n */\nvar stepModal = params => {\n  var $def = $.Deferred()\n  var {\n    title,\n    content,\n    contents,\n    step,\n    btnBefore,\n    btnAfter,\n    btnDone,\n    afterDone,\n    onShow,\n  } = params\n\n  // 规范变量\n  contents = contents || content\n  if (typeof contents !== 'object')\n    throw 'stepModal contents type error: Unexpected type ' + typeof contents\n  if (contents.length < 1) throw 'stepModal missing contents'\n  $.each(contents, (key, val) => {\n    if (typeof val === 'string') val = { content: val }\n    if (!val.title) val.title = title || ''\n    if (!val.content) val.content = ''\n    contents[key] = val\n  })\n  step = step || 1\n  if (isNaN(step) || step < 1) step = 1\n  if (!contents[step]) step = 1\n\n  // content 数组前插一位，方便处理以下逻辑：\n  // step1 指的就是第一步，而不是数组的第二个\n  try {\n    contents.unshift(0)\n  } catch (e) {\n    console.error('stepModal unknown error', e)\n    return\n  }\n  var allSteps = contents.length - 1\n\n  var $modal = ssi_modal\n    .createObject({\n      center: 1,\n      className:\n        'in-page-edit ipe-stepModal ' +\n        (params.className ? params.className : ''),\n      sizeClass: params.sizeClass || 'small',\n      outSideClose: 0,\n      onShow(modal) {\n        onShow && onShow(modal)\n      },\n    })\n    .init()\n  var $modalObj = $(document.getElementById($modal.modalId))\n\n  $modal.setButtons([\n    {\n      label: btnBefore ? btnBefore : '← before',\n      className: 'btn btn-secondary btn-before',\n      side: 'left',\n      method: before,\n    },\n    {\n      label: btnAfter ? btnAfter : 'after →',\n      className: 'btn btn-secondary btn-after',\n      method: after,\n    },\n    {\n      label: btnDone ? btnDone : 'done √',\n      className: 'btn btn-primary btn-done',\n      method(e, modal) {\n        modal.close()\n        $def.resolve()\n        afterDone && afterDone()\n      },\n    },\n  ])\n\n  var $btnBefore = $modalObj.find('.btn-before'),\n    $btnAfter = $modalObj.find('.btn-after'),\n    $btnDone = $modalObj.find('.btn-done')\n\n  // 设定初始状态\n  $btnDone.hide()\n  if (step === 1) $btnBefore.hide()\n  if (step === allSteps) {\n    $btnAfter.hide()\n    $btnDone.show()\n  }\n  $modalObj.find('.ssi-closeIcon').hide()\n\n  /**\n   * @function setStep\n   * @param {Number} step\n   */\n  function setStep(step) {\n    $modal.setTitle(`${contents[step].title} (${step}/${allSteps})`)\n    $modal.setContent(contents[step].content)\n    if (contents[step].method && typeof contents[step].method === 'function')\n      contents[step].method($modal)\n  }\n\n  /**\n   * @function before\n   */\n  function before(modal) {\n    var $btn = $(modal.target)\n    if (step <= 1) return (step = 1)\n\n    $btnAfter.show()\n    $btnDone.hide()\n\n    step--\n    setStep(step)\n\n    if (step <= 1) $btn.hide()\n  }\n\n  /**\n   * @function after\n   */\n  function after(modal) {\n    var $btn = $(modal.target)\n    if (step >= allSteps) return (step = allSteps)\n\n    $btnBefore.show()\n\n    step++\n    setStep(step)\n\n    if (step >= allSteps) {\n      $btn.hide()\n      $btnDone.show()\n    }\n  }\n\n  // init\n  $modal.show()\n  setStep(step)\n\n  $def.$modal = $modal\n  return $def\n}\n\nmodule.exports = {\n  stepModal,\n}\n","const version = require('../package.json').version\n\nmodule.exports = version\n","const { _msg } = require('./_msg')\n\nconst api = require('./api.json')\nconst version = require('./version')\n\n/**\n * @module versionInfo 版本信息模块\n * @description Show Update Logs Modal box\n */\nvar versionInfo = function () {\n  // 显示模态框\n  ssi_modal.show({\n    className: 'in-page-edit update-logs-modal',\n    title:\n      _msg('updatelog-title') +\n      ' - <span id=\"yourVersion\">' +\n      version +\n      '</span>',\n    content: $('<section>').append(\n      $('<iframe>', {\n        style: 'margin: 0;padding: 0;width: 100%;height: 80vh;border: 0;',\n        src: api.updatelogsUrl,\n      })\n    ),\n    buttons: [\n      {\n        label: 'GitHub',\n        className: 'btn btn-secondary',\n        method: function () {\n          window.open(api.githubLink)\n        },\n      },\n      {\n        label: _msg('updatelog-about'),\n        className: 'btn btn-secondary',\n        method: function () {\n          window.open(api.aboutUrl)\n        },\n      },\n      {\n        label: _msg('close'),\n        className: 'btn btn-primary',\n        method: function (a, modal) {\n          modal.close()\n        },\n      },\n    ],\n  })\n}\n\nmodule.exports = {\n  versionInfo,\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/**\n * @license GPL-3.0 GNU GENERAL PUBLIC LICENSE 3.0\n *\n * @name InPageEdit\n * @description A useful MediaWiki JavaScript Plugin written with jQuery\n * @author 机智的小鱼君 Dragon-Fish <dragon-fish@qq.com>\n * @url https://github.com/Dragon-Fish/InPageEdit-v2\n */\n\n!(async function () {\n  'use strict'\n\n  // 创建 InPageEdit 变量\n  var InPageEdit = window.InPageEdit || {}\n\n  // 防止多次运行\n  if (InPageEdit.loaded) {\n    throw '[InPageEdit] InPageEdit 已经在运行了'\n  } else {\n    InPageEdit.loaded = true\n  }\n\n  // 初始化插件\n  var init = require('./method/init')\n\n  var mainFunctions = await init()\n\n  // 合并入全局变量\n  window.InPageEdit = $.extend({}, window.InPageEdit, mainFunctions)\n})()\n"],"sourceRoot":""}